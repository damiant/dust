import{c as s}from"./chunk-OZ2IKH4J.js";import{C as se,Y as pe}from"./chunk-IKEGAJLW.js";import{F as le,e as g,g as E,v as oe}from"./chunk-MPA3GIYF.js";import"./chunk-XMQYHBKU.js";import{$ as b,Bc as re,Cc as ae,G as r,I as _,Kb as Q,L as T,Pa as H,Rb as j,Sb as U,Tb as Y,Ub as G,Vb as z,Xb as J,Y as C,Z as v,Zb as K,_ as I,aa as n,ba as a,ca as W,dc as X,ea as B,ec as Z,fa as V,gc as x,hb as A,ib as k,jb as O,ka as M,kb as F,la as R,lb as N,lc as $,ma as P,ob as L,oc as ee,pc as te,rb as D,rc as ie,s as p,sa as u,t as m,ta as S,wc as ne,xa as c,ya as d,za as h}from"./chunk-A5SCVZG7.js";import"./chunk-JORYF43P.js";import"./chunk-7KGURMOZ.js";import"./chunk-R7LHOHUY.js";import"./chunk-HUOLUIW7.js";import"./chunk-CCK7OWI7.js";import"./chunk-LIBYTRNP.js";import"./chunk-3MK77LPM.js";import"./chunk-4U6PRYVA.js";import"./chunk-CZ4AHVKD.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{h as q}from"./chunk-LNJ3S2LQ.js";var ue=["name"],ce=["email"];function de(f,l){if(f&1&&(n(0,"ion-select-option",13),u(1),a()),f&2){let i=l.$implicit;b("value",i),r(),S(i)}}function he(f,l){if(f&1&&(n(0,"ion-select-option",13),u(1),a()),f&2){let i=l.$implicit;b("value",i),r(),S(i)}}var y=class y{constructor(l,i,e){this.api=l;this.alert=i;this.location=e;this.unknown="A burn not in dust yet";this.selectBurn="";this.selectTopic="";this.sending=!1;this.reset={name:"",email:"",burn:this.selectBurn,topic:this.selectTopic,description:""};this.helpRequest=this.reset;this.categories=["Event Registration","Camp Registration","Art Registration","Access to a Camp","Using Dust","Other Enquiry"];this.burns=[this.selectBurn];pe({helpOutline:se})}ngOnInit(){return q(this,null,function*(){this.helpRequest.email=this.api.userEmail(),this.helpRequest.burn=this.api.festivalTitle(),this.burns=(yield this.api.getUnAuthedBurns()).map(l=>l.name),this.burns.push(this.unknown)})}submit(){return q(this,null,function*(){if(g(this.helpRequest.name)){yield s(this.alert,"Please enter your name.","Error"),yield E(200),this.name.setFocus();return}if(g(this.helpRequest.email)||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.helpRequest.email)){yield s(this.alert,"A valid email is required.","Error"),yield E(200),this.email.setFocus();return}if(g(this.helpRequest.description)){yield s(this.alert,"Description is required. Please provide a description of your enquiry.","Error");return}if(g(this.helpRequest.burn)){yield s(this.alert,"Please select a burn.","Error");return}if(g(this.helpRequest.topic)){yield s(this.alert,"Please select a topic.","Error");return}try{oe(this.helpRequest),this.sending=!0,yield this.api.submitForm(this.helpRequest),this.helpRequest=this.reset,yield s(this.alert,"Your help request has been submitted. We will get back to you via email soon.","Success"),this.location.back(),this.sending=!1}catch{yield s(this.alert,"There was an error submitting your request. Please try again.","Error")}finally{}})}};y.\u0275fac=function(i){return new(i||y)(_(le),_(ie),_(H))},y.\u0275cmp=T({type:y,selectors:[["app-help"]],viewQuery:function(i,e){if(i&1&&(M(ue,5),M(ce,5)),i&2){let o;R(o=P())&&(e.name=o.first),R(o=P())&&(e.email=o.first)}},decls:34,vars:7,consts:[["name",""],["email",""],["color","primary"],["slot","start"],[3,"fullscreen"],[1,"border"],[3,"ngSubmit"],["lines","none"],["label","Your Name","labelPlacement","stacked","name","name","required","",3,"ngModelChange","ngModel"],["label","Email Address","labelPlacement","stacked","name","email","type","email","required","",3,"ngModelChange","ngModel"],["lines","none",1,"app-select"],[1,"select-container"],["placeholder","Select Burn","labelPlacement","stacked","interface","popover","label","Which burn is this about?","name","burn",1,"app-select",3,"ngModelChange","ngModel"],[3,"value"],["labelPlacement","stacked","interface","popover","label","What can we help with?","placeholder","Select Topic","name","category",1,"app-select",3,"ngModelChange","ngModel"],["labelPlacement","stacked","label","Describe how we can help you?","name","description","rows","6","required","",3,"ngModelChange","ngModel"],[1,"center"],["type","submit",3,"disabled"]],template:function(i,e){if(i&1){let o=B();n(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-buttons",3),W(3,"ion-back-button"),a(),n(4,"ion-title"),u(5,"Help"),a()()(),n(6,"ion-content",4)(7,"div",5)(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),u(11,"Need Assistance?"),a()(),n(12,"ion-card-content")(13,"form",6),V("ngSubmit",function(){return p(o),m(e.submit())}),n(14,"ion-list",7)(15,"ion-item")(16,"ion-input",8,0),h("ngModelChange",function(t){return p(o),d(e.helpRequest.name,t)||(e.helpRequest.name=t),m(t)}),a()(),n(18,"ion-item")(19,"ion-input",9,1),h("ngModelChange",function(t){return p(o),d(e.helpRequest.email,t)||(e.helpRequest.email=t),m(t)}),a()(),n(21,"ion-item",10)(22,"div",11)(23,"ion-select",12),h("ngModelChange",function(t){return p(o),d(e.helpRequest.burn,t)||(e.helpRequest.burn=t),m(t)}),v(24,de,2,2,"ion-select-option",13,C),a(),n(26,"ion-select",14),h("ngModelChange",function(t){return p(o),d(e.helpRequest.topic,t)||(e.helpRequest.topic=t),m(t)}),v(27,he,2,2,"ion-select-option",13,C),a()()(),n(29,"ion-item")(30,"ion-textarea",15),h("ngModelChange",function(t){return p(o),d(e.helpRequest.description,t)||(e.helpRequest.description=t),m(t)}),a()()(),n(31,"div",16)(32,"ion-button",17),u(33,"Submit Request"),a()()()()()()()}i&2&&(r(6),b("fullscreen",!0),r(10),c("ngModel",e.helpRequest.name),r(3),c("ngModel",e.helpRequest.email),r(4),c("ngModel",e.helpRequest.burn),r(),I(e.burns),r(2),c("ngModel",e.helpRequest.topic),r(),I(e.categories),r(3),c("ngModel",e.helpRequest.description),r(2),b("disabled",e.sending))},dependencies:[J,z,D,N,A,k,L,F,O,X,te,U,Q,ee,j,K,Y,G,x,Z,ne,ae,re,$],styles:[".required[_ngcontent-%COMP%]{color:var(--ion-color-danger)}p[_ngcontent-%COMP%]{margin-bottom:1.5rem}.select-container[_ngcontent-%COMP%]{display:flex;width:100%;gap:1rem}@media (max-width: 500px){.select-container[_ngcontent-%COMP%]{flex-direction:column;height:200px}}ion-select[_ngcontent-%COMP%]{width:100%}"]});var me=y;export{me as HelpPage};
