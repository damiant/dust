import{b as Fe}from"./chunk-OMBCAVUQ.js";import{a as Z}from"./chunk-WEGRPUTR.js";import{a as ee,c as I}from"./chunk-LADCEZG6.js";import"./chunk-5W5FH4VE.js";import"./chunk-2RWSG5RW.js";import"./chunk-G3CKXV7X.js";import"./chunk-5FZVM2DH.js";import"./chunk-HC6MZPB3.js";import"./chunk-YMI2B6JE.js";import"./chunk-4JPLRTL2.js";import"./chunk-NPRM7GGH.js";import"./chunk-52VTL4OE.js";import"./chunk-VBU7NMPV.js";import"./chunk-2EOHHFOF.js";import"./chunk-JXIEZMHN.js";import"./chunk-3GGVU3XB.js";import"./chunk-MCRJI3T3.js";import"./chunk-5ZNPFCKO.js";import"./chunk-46PQVYTJ.js";import"./chunk-MM5QLNJM.js";import"./chunk-3573TPBU.js";import{C as se,V as le}from"./chunk-2QPEVPNK.js";import{E as N,e as ge,i as De,k as Be}from"./chunk-GUYT2OMO.js";import"./chunk-MIGJGGKJ.js";import{$b as xe,A as u,Aa as fe,B as g,Ca as s,Da as Ce,Ea as V,Ec as We,Fc as Ue,H as ne,Ha as _,I as R,Ia as h,Ja as v,L as oe,Mb as Se,P as _e,Pb as Te,Qb as ke,S as l,T as ae,Tb as T,Ua as ye,Ub as re,Vb as D,W as he,Wb as B,X as P,Xb as k,Y as y,Yb as F,Za as be,Zb as M,_b as Me,aa as w,ea as p,eb as we,ec as Ie,fb as Ee,fc as Re,gc as x,ha as E,ic as q,la as o,lc as Pe,ma as r,na as f,nb as O,ob as Q,pa as S,pc as Ve,qa as d,qc as Ae,ra as c,rb as z,rc as Le,tb as U,w as b,wa as A,xa as L,xc as H,ya as W,yc as j,za as ve}from"./chunk-6CV35SS5.js";import"./chunk-ATW7DGUS.js";import"./chunk-7KGURMOZ.js";import"./chunk-UXWCR2YA.js";import"./chunk-QYFQMV2H.js";import"./chunk-ORVKXEJA.js";import"./chunk-KBMMZLX2.js";import"./chunk-5J6JP6Q2.js";import"./chunk-4U6PRYVA.js";import"./chunk-CZ4AHVKD.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{h as C}from"./chunk-LNJ3S2LQ.js";var ze=["link"],He=["link2"],je=["link3"],G=class G{constructor(i){this.api=i;this.campsUrl="";this.eventsUrl="";this.artUrl="";this.vanity=R("")}ngOnInit(){this.campsUrl=`https://${this.vanity()}.dust.events/camps/`,this.eventsUrl=`https://${this.vanity()}.dust.events/events/`,this.artUrl=`https://${this.vanity()}.dust.events/art/`}message(i,t){this.api.sendMessage(t,0,i)}copyCampsUrl(){let i=this.link.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}copyArtUrl(){let i=this.link3.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}copyEventsUrl(){let i=this.link2.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}};G.\u0275fac=function(t){return new(t||G)(ae(N))},G.\u0275cmp=y({type:G,selectors:[["app-web-links"]],viewQuery:function(t,e){if(t&1&&(A(ze,5),A(He,5),A(je,5)),t&2){let n;L(n=W())&&(e.link=n.first),L(n=W())&&(e.link2=n.first),L(n=W())&&(e.link3=n.first)}},inputs:{vanity:[1,"vanity"]},decls:30,vars:9,consts:[["link",""],["link2",""],["link3",""],[2,"width","100%"],["color","primary","routerLink","./css",2,"margin-left","auto"],["lines","none"],["slot","start","name","information-circle-outline",3,"click"],["fill","solid","slot","end","color","primary","id","open-toast",3,"click"],["fill","solid","color","primary","id","open-toast","slot","end",3,"click"],["slot","end","fill","solid","color","primary","id","open-toast",3,"click"],["type","text",3,"hidden","value"]],template:function(t,e){if(t&1){let n=S();o(0,"ion-card-header")(1,"ion-card-title",3)(2,"ion-buttons"),s(3," Lists "),o(4,"ion-button",4),s(5,"CSS"),r()()(),o(6,"ion-card-subtitle"),s(7," These can be used on your website to display a live list of camps, events and art. "),r()(),o(8,"ion-list",5)(9,"ion-item")(10,"ion-icon",6),d("click",function(){return u(n),g(e.message("Theme Camps Web Page","This link for a web page of all theme camp can be used on your website."))}),r(),s(11),o(12,"ion-button",7),d("click",function(){return u(n),g(e.copyCampsUrl())}),s(13,"Copy"),r()(),o(14,"ion-item")(15,"ion-icon",6),d("click",function(){return u(n),g(e.message("Events Web Page","This link for a web page of all events can be used on your website."))}),r(),s(16),o(17,"ion-button",8),d("click",function(){return u(n),g(e.copyEventsUrl())}),s(18,"Copy"),r()(),o(19,"ion-item")(20,"ion-icon",6),d("click",function(){return u(n),g(e.message("Art Web Page","This link for a web page of art can be used on your website."))}),r(),s(21),o(22,"ion-button",9),d("click",function(){return u(n),g(e.copyArtUrl())}),s(23,"Copy"),r()()(),f(24,"input",10,0)(26,"input",10,1)(28,"input",10,2)}t&2&&(l(11),V(" ",e.campsUrl," "),l(5),V(" ",e.eventsUrl," "),l(5),V(" ",e.artUrl," "),l(3),p("hidden",!0)("value",e.campsUrl),l(2),p("hidden",!0)("value",e.eventsUrl),l(2),p("hidden",!0)("value",e.artUrl))},dependencies:[re,T,q,H,M,k,F,x,Ee],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:var(--fr3)!important}ion-icon[_ngcontent-%COMP%]{cursor:pointer}"]});var de=G;var Ze=["link"];function Ge(m,i){if(m&1){let t=S();o(0,"ion-item",1)(1,"ion-icon",2),d("click",function(){u(t);let n=c();return g(n.message(n.title(),n.description()))}),r(),o(2,"a",3),s(3),r(),o(4,"ion-button",4),d("click",function(){u(t);let n=c();return g(n.copy())}),s(5,"Copy"),r()(),f(6,"input",5,0)}if(m&2){let t=c();l(2),p("href",t.url(),_e),l(),Ce(t.url()),l(3),p("hidden",!0)("value",t.url())}}var Y=class Y{constructor(){this.url=R();this.enabled=R(!0);this.title=R("");this.description=R("");this.link=he("link");this.api=b(N);le({informationCircleOutline:se})}message(i,t){this.api.sendMessage(t,0,i)}copy(){let i=this.link().nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}};Y.\u0275fac=function(t){return new(t||Y)},Y.\u0275cmp=y({type:Y,selectors:[["app-url-link"]],viewQuery:function(t,e){t&1&&ve(e.link,Ze,5),t&2&&fe()},inputs:{url:[1,"url"],enabled:[1,"enabled"],title:[1,"title"],description:[1,"description"]},decls:1,vars:1,consts:[["link",""],[1,"url"],["slot","start","name","information-circle-outline",3,"click"],["target","_blank",3,"href"],["id","open-toast","slot","end",3,"click"],["type","text",3,"hidden","value"]],template:function(t,e){t&1&&w(0,Ge,8,4),t&2&&E(e.enabled()?0:-1)},dependencies:[x,H,T],styles:[".url[_ngcontent-%COMP%]{color:var(--ion-color-dark)}ion-icon[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--ion-text-color)}"]});var me=Y;var Ye=["link"],Je=["artLink"],Ke=["eventLink"];function Xe(m,i){if(m&1){let t=S();o(0,"ion-item",2)(1,"ion-input",11),v("ngModelChange",function(n){u(t);let a=c();return h(a.pin,n)||(a.pin=n),g(n)}),d("ionChange",function(){u(t);let n=c();return g(n.changed())}),r()()}if(m&2){let t=c();l(),_("ngModel",t.pin)}}function $e(m,i){if(m&1){let t=S();o(0,"ion-item",2)(1,"ion-textarea",12),v("ngModelChange",function(n){u(t);let a=c();return h(a.directionsText,n)||(a.directionsText=n),g(n)}),d("ionChange",function(){u(t);let n=c();return g(n.changed())}),r()()}if(m&2){let t=c();l(),p("spellcheck",!0)("rows",6)("autoGrow",!0),_("ngModel",t.directionsText)}}var J=class J{constructor(i){this.api=i;this.toastButtons=[{text:"Dismiss",role:"cancel"}];this.url="";this.burnUrl="";this.artUrl="";this.eventUrl="";this.directionsText=void 0;this.vanity=R("");le({informationCircleOutline:se})}ngOnInit(){let i=this.api.vanity();this.burnUrl=`https://${i}.dust.events`,this.url=`${document.location.protocol}//${document.location.host}/${i}/camps`,this.artUrl=`${document.location.protocol}//${document.location.host}/${i}/art`,this.eventUrl=`${document.location.protocol}//${document.location.host}/${i}/events`}copy(){let i=this.link.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}copyArt(){let i=this.artLink.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}copyEventUrl(){let i=this.eventLink.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}changed(i,t){i=="camp"&&t.detail.checked&&(this.campEditing=!0,this.artEditing=!0,this.eventEditing=!0),this.requirePin||(this.pin=void 0),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.api.festivalId&&(this.pin>9999&&(this.pin=9999),this.api.updateFestivalSettings({id:this.api.festivalId,camp_registration:this.enabled,event_registration:this.eventRegistration,event_editing:this.eventEditing,camp_editing:this.campEditing,art_editing:this.artEditing,map_direction:this.mapDirection,directions:this.directions?this.directionsText:void 0,pin:this.requirePin?this.pin:void 0}))},3e3)}message(i,t){this.api.sendMessage(t,0,i)}};J.\u0275fac=function(t){return new(t||J)(ae(N))},J.\u0275cmp=y({type:J,selectors:[["app-camp-registration"]],viewQuery:function(t,e){if(t&1&&(A(Ye,5),A(Je,5),A(Ke,5)),t&2){let n;L(n=W())&&(e.link=n.first),L(n=W())&&(e.artLink=n.first),L(n=W())&&(e.eventLink=n.first)}},inputs:{enabled:"enabled",eventRegistration:"eventRegistration",eventEditing:"eventEditing",campEditing:"campEditing",artEditing:"artEditing",requirePin:"requirePin",mapDirection:"mapDirection",directions:"directions",directionsText:"directionsText",pin:"pin",vanity:[1,"vanity"]},decls:57,vars:17,consts:[["slot","start","name","information-circle-outline",3,"click"],["labelPlacement","start",3,"ionChange","ngModelChange","ngModel"],["lines","none"],["title","Burn URL","description","Copy this link and use it on your website for registration of camps, art and events",3,"url"],["value","first"],["slot","header"],["slot","content"],["title","Camp Registration URL","description","Copy this link and use it on your website to allow people to register their camp.",3,"url","enabled"],["title","Event Registration URL","description","Copy this link and use it on your website to allow people to register an event in open camping or a described location (not a theme camp or art piece).",3,"url","enabled"],["title","Art Registration URL","description","Copy this link and use it on your website to allow people to register their art.",3,"url","enabled"],[3,"vanity"],["maxlength","4","type","number","placeholder","PIN",3,"ngModelChange","ionChange","ngModel"],["labelPlacement","stacked","label","Directions","placeholder","Describe how an attendee will get to the event",3,"ngModelChange","ionChange","spellcheck","rows","autoGrow","ngModel"]],template:function(t,e){t&1&&(o(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),s(3," Options "),r()(),o(4,"ion-card-content")(5,"ion-item")(6,"ion-icon",0),d("click",function(){return e.message("Camp/Art Registration","Enable if you allow new camps to be registered. Disable you are not accepting camp registration yet.")}),r(),o(7,"ion-toggle",1),d("ionChange",function(a){return e.changed("camp",a)}),v("ngModelChange",function(a){return h(e.enabled,a)||(e.enabled=a),a}),s(8,"Allow Camp/Art Registration"),r()(),o(9,"ion-item")(10,"ion-icon",0),d("click",function(){return e.message("Event Registration","Choose whether event registration is allowed by users who are not theme camp leads or artists.")}),r(),o(11,"ion-toggle",1),d("ionChange",function(){return e.changed()}),v("ngModelChange",function(a){return h(e.eventRegistration,a)||(e.eventRegistration=a),a}),s(12,"Allow Event Registration by the public"),r()(),o(13,"ion-item")(14,"ion-icon",0),d("click",function(){return e.message("Event Editing","Allows events or music to be edited. ")}),r(),o(15,"ion-toggle",1),d("ionChange",function(){return e.changed()}),v("ngModelChange",function(a){return h(e.eventEditing,a)||(e.eventEditing=a),a}),s(16,"Allow Event/Music Editing"),r()(),o(17,"ion-item")(18,"ion-icon",0),d("click",function(){return e.message("Camp Editing","Allows camps that have already registered to edit their camp details.")}),r(),o(19,"ion-toggle",1),d("ionChange",function(){return e.changed()}),v("ngModelChange",function(a){return h(e.campEditing,a)||(e.campEditing=a),a}),s(20,"Allow Camp Editing"),r()(),o(21,"ion-item")(22,"ion-icon",0),d("click",function(){return e.message("Art Editing","Allows art owners that have already registered to edit their art details.")}),r(),o(23,"ion-toggle",1),d("ionChange",function(){return e.changed()}),v("ngModelChange",function(a){return h(e.artEditing,a)||(e.artEditing=a),a}),s(24,"Allow Art Editing"),r()(),o(25,"ion-item")(26,"ion-icon",0),d("click",function(){return e.message("Require PIN","Whether to require a PIN to be entered to access the event.")}),r(),o(27,"ion-toggle",1),d("ionChange",function(){return e.changed()}),v("ngModelChange",function(a){return h(e.requirePin,a)||(e.requirePin=a),a}),s(28,"Require PIN"),r()(),w(29,Xe,2,1,"ion-item",2),o(30,"ion-item")(31,"ion-icon",0),d("click",function(){return e.message("Directions","Whether to show text when the directions button is clicked.")}),r(),o(32,"ion-toggle",1),d("ionChange",function(){return e.changed()}),v("ngModelChange",function(a){return h(e.directions,a)||(e.directions=a),a}),s(33,"Text Based Directions"),r()(),w(34,$e,2,4,"ion-item",2),r()(),f(35,"br"),o(36,"ion-card")(37,"ion-card-content")(38,"ion-card-header")(39,"ion-card-title"),s(40," Registration "),r(),o(41,"ion-card-subtitle"),s(42,"Use this link on your website to register camps, events and art."),r()(),f(43,"app-url-link",3),o(44,"ion-accordion-group")(45,"ion-accordion",4)(46,"ion-item",5),s(47,"Advanced"),r(),o(48,"div",6)(49,"ion-list",2)(50,"ion-card-header")(51,"ion-card-subtitle"),s(52,"These can be used on your website to register camps, events and art."),r()(),f(53,"app-url-link",7)(54,"app-url-link",8)(55,"app-url-link",9)(56,"app-web-links",10),r()()()()()()),t&2&&(l(7),_("ngModel",e.enabled),l(4),_("ngModel",e.eventRegistration),l(4),_("ngModel",e.eventEditing),l(4),_("ngModel",e.campEditing),l(4),_("ngModel",e.artEditing),l(4),_("ngModel",e.requirePin),l(2),E(e.requirePin?29:-1),l(3),_("ngModel",e.directions),l(2),E(e.directions?34:-1),l(9),p("url",e.burnUrl),l(10),p("url",e.url)("enabled",!!e.enabled),l(),p("url",e.eventUrl)("enabled",!!e.eventEditing),l(),p("url",e.artUrl)("enabled",!!e.enabled),l(),p("vanity",e.vanity()))},dependencies:[We,j,H,Ue,U,O,z,Q,q,x,B,M,k,D,F,de,Te,ke,me],styles:[".url[_ngcontent-%COMP%]{color:var(--ion-color-dark)}ion-icon[_ngcontent-%COMP%]{cursor:pointer}"]});var pe=J;var K=class K{constructor(){this.username=P("");this.server=P("");this.inboxEmail=P("");this.rssFeed=P("");this.saved=ne();this.saving=oe(!1);this.alert=b(Z)}save(){return C(this,null,function*(){if(this.username()==""&&this.server()==""&&this.inboxEmail()==""&&this.rssFeed()==""){this.saved.emit({mastodonHandle:"",inboxEmail:"",rssFeed:""});return}if(this.username().length<2&&this.server().length>0){yield I(this.alert,"Your mastodon username must be specified");return}if(this.server().length<2&&this.username().length>0){yield I(this.alert,"The mastodon server must be specified");return}if(!this.server().includes(".")&&this.username().length>0){yield I(this.alert,"The mastodon server is not valid");return}if(!this.validUsername(this.username())&&this.server().length>0){yield I(this.alert,"The mastodon username is not valid");return}if(!this.validServername(this.server())&&this.username().length>0){yield I(this.alert,"The mastodon server is not valid");return}let i=this.username()==""?"":`@${this.username()}@${this.server()}`;this.saved.emit({mastodonHandle:i,inboxEmail:this.inboxEmail(),rssFeed:this.rssFeed()}),this.saving.set(!0)})}validUsername(i){return/^[a-zA-Z0-9_]+$/.test(i)}validServername(i){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?)*$/.test(i)}reset(){this.username.set(""),this.server.set(""),this.inboxEmail.set(""),this.rssFeed.set("")}};K.\u0275fac=function(t){return new(t||K)},K.\u0275cmp=y({type:K,selectors:[["app-message-settings"]],inputs:{username:[1,"username"],server:[1,"server"],inboxEmail:[1,"inboxEmail"],rssFeed:[1,"rssFeed"]},outputs:{username:"usernameChange",server:"serverChange",inboxEmail:"inboxEmailChange",rssFeed:"rssFeedChange",saved:"saved"},decls:36,vars:5,consts:[[2,"width","100%"],["lines","none"],["label","Mastodon Username","labelPlacement","stacked","placeholder","Username","helperText","","maxlength","256",3,"ngModelChange","ngModel"],["label","Mastodon Server","labelPlacement","stacked","placeholder","E.g. mastondon.social","helperText","",3,"ngModelChange","ngModel"],["label","Email Address","labelPlacement","stacked","placeholder","","helperText","","maxlength","256",3,"ngModelChange","ngModel"],["label","RSS Feed","labelPlacement","stacked","placeholder","","helperText","","maxlength","512",3,"ngModelChange","ngModel"],[1,"row-center","ion-padding"],["size","small",3,"click","disabled"],["size","small",3,"click"]],template:function(t,e){t&1&&(o(0,"ion-card")(1,"ion-card-content")(2,"ion-card-header")(3,"ion-card-title",0),s(4," Mastodon "),r(),o(5,"ion-card-subtitle"),s(6," Posts to this mastodon account will be sent as notifications to all users in dust who have visited your regional. The top 20 posts of this account are shown in dust in the messages section. "),r()(),o(7,"ion-list")(8,"ion-item",1)(9,"ion-input",2),v("ngModelChange",function(a){return h(e.username,a)||(e.username=a),a}),r(),o(10,"p"),s(11,"@"),r(),o(12,"ion-input",3),v("ngModelChange",function(a){return h(e.server,a)||(e.server=a),a}),r()()()(),o(13,"ion-card-content")(14,"ion-card-header")(15,"ion-card-title"),s(16," Email "),r(),o(17,"ion-card-subtitle"),s(18,"Emails sent to inbox@dust.events from this email address will be sent as notifications to all users in dust who have visited your regional. The email will also show dust in the messages section."),r()(),o(19,"ion-list")(20,"ion-item",1)(21,"ion-input",4),v("ngModelChange",function(a){return h(e.inboxEmail,a)||(e.inboxEmail=a),a}),r()()()(),o(22,"ion-card-content")(23,"ion-card-header")(24,"ion-card-title"),s(25," RSS "),r(),o(26,"ion-card-subtitle"),s(27,"New articles in this RSS Feed will be sent as notifications to all users in dust who have visited your event. The article will also show dust in the messages section."),r()(),o(28,"ion-list")(29,"ion-item",1)(30,"ion-input",5),v("ngModelChange",function(a){return h(e.rssFeed,a)||(e.rssFeed=a),a}),r()()(),o(31,"div",6)(32,"ion-button",7),d("click",function(){return e.save()}),s(33,"Apply"),r(),o(34,"ion-button",8),d("click",function(){return e.reset()}),s(35,"Reset"),r()()()()),t&2&&(l(9),_("ngModel",e.username),l(3),_("ngModel",e.server),l(9),_("ngModel",e.inboxEmail),l(9),_("ngModel",e.rssFeed),l(2),p("disabled",e.saving()))},dependencies:[T,x,j,q,B,M,k,D,U,O,z,Q,F],styles:["ion-card-subtitle[_ngcontent-%COMP%]{text-wrap:wrap;width:100%}p[_ngcontent-%COMP%]{font-size:var(--fr3);padding-top:.75rem}"]});var ce=K;var X=class X{constructor(){this.identifier=P("");this.domain=P("");this.uniqueId=P("");this.saving=oe(!1);this.saved=ne();this.alert=b(Z)}save(){return C(this,null,function*(){if(ge(this.identifier())&&ge(this.domain())){this.saved.emit({identifier:"",domain:""});return}if(this.domain().length<2){yield I(this.alert,"The domain must be specified");return}if(this.identifier().length<2){yield I(this.alert,"The identifier must be specified");return}let i=this.domain().replace(".volunteeripate.com","").replace("http://","").replace("https://","");if(i.includes(".")){yield I(this.alert,"The domain should not contain a period");return}this.saved.emit({identifier:this.identifier(),domain:i}),this.saving.set(!0)})}reset(){this.identifier.set(""),this.domain.set("")}};X.\u0275fac=function(t){return new(t||X)},X.\u0275cmp=y({type:X,selectors:[["app-volunteeripate-settings"]],inputs:{identifier:[1,"identifier"],domain:[1,"domain"],uniqueId:[1,"uniqueId"]},outputs:{identifier:"identifierChange",domain:"domainChange",uniqueId:"uniqueIdChange",saved:"saved"},decls:20,vars:4,consts:[["href","https://volunteeripate.com"],["lines","none"],["label","Identifier","labelPlacement","stacked","placeholder","","helperText","Unique identifier for the Volunteeripate event","maxlength","256",3,"ngModelChange","ngModel"],["label","Subdomain","labelPlacement","stacked",3,"ngModelChange","placeholder","helperText","ngModel"],[1,"row-center","ion-padding"],["size","small",3,"click","disabled"],["size","small",3,"click"]],template:function(t,e){t&1&&(o(0,"ion-card")(1,"ion-card-content")(2,"ion-card-header")(3,"ion-card-title"),s(4," Volunteeripate "),r(),o(5,"ion-card-subtitle"),s(6,"Dust can show a volunteers shifts and remind them before the shift begins."),f(7,"br"),o(8,"a",0),s(9,"Volunteeripate"),r(),s(10," is a platform for volunteering and tickets. "),r()(),o(11,"ion-list")(12,"ion-item",1)(13,"ion-input",2),v("ngModelChange",function(a){return h(e.identifier,a)||(e.identifier=a),a}),r(),o(14,"ion-input",3),v("ngModelChange",function(a){return h(e.domain,a)||(e.domain=a),a}),r()()(),o(15,"div",4)(16,"ion-button",5),d("click",function(){return e.save()}),s(17,"Apply"),r(),o(18,"ion-button",6),d("click",function(){return e.reset()}),s(19,"Reset"),r()()()()),t&2&&(l(13),_("ngModel",e.identifier),l(),p("helperText","E.g. "+e.uniqueId()+".volunteeripate.com"),_("ngModel",e.domain),l(2),p("disabled",e.saving()))},dependencies:[T,x,j,q,B,M,k,D,U,O,z,Q,F],styles:["p[_ngcontent-%COMP%]{font-size:var(--fr3);padding-top:.75rem}"]});var ue=X;function et(m,i){if(m&1&&s(0),m&2){let t=c(2);V(" Delete ",t.festival.name," ")}}function tt(m,i){m&1&&s(0," Delete ")}function it(m,i){if(m&1){let t=S();o(0,"ion-row",10)(1,"ion-col")(2,"ion-text"),s(3),r()(),o(4,"ion-col",11)(5,"ion-button",12),d("click",function(){u(t);let n=c(2);return g(n.clearEvents())}),s(6,"Delete Events"),r()()()}if(m&2){let t=c(2);l(3),V("Delete all events at ",t.festival.name,"? This cannot be undone.")}}function nt(m,i){if(m&1&&s(0),m&2){let t=c(2);V(" Delete ",t.festival.name,"? This cannot be undone. ")}}function ot(m,i){if(m&1&&s(0),m&2){let t=c(2);V(" Delete all camps, events and art at ",t.festival.name,"? This cannot be undone. ")}}function at(m,i){if(m&1){let t=S();o(0,"div",5),f(1,"app-camp-registration",6)(2,"br"),o(3,"app-message-settings",7),d("saved",function(n){u(t);let a=c();return g(a.saveMessageSettings(n))}),r(),f(4,"br"),o(5,"app-volunteeripate-settings",8),d("saved",function(n){u(t);let a=c();return g(a.saveVoluneeripateSettings(n))}),r(),f(6,"br"),o(7,"app-event-types",9),d("eventTypesChange",function(n){u(t);let a=c();return g(a.saveEventTypes(n))}),r(),f(8,"br"),o(9,"ion-card",0)(10,"ion-card-content")(11,"ion-card-header")(12,"ion-card-title"),w(13,et,1,1)(14,tt,1,0),r()(),o(15,"ion-grid"),w(16,it,7,1,"ion-row",10),o(17,"ion-row",10)(18,"ion-col")(19,"ion-text"),w(20,nt,1,1)(21,ot,1,1),r()(),o(22,"ion-col",11)(23,"ion-button",12),d("click",function(){u(t);let n=c();return g(n.deleteBurn())}),s(24,"Delete All"),r()()()()()()()}if(m&2){let t=c();l(),p("enabled",t.festival.camp_registration)("eventRegistration",t.festival.event_registration)("eventEditing",t.festival.event_editing)("campEditing",t.festival.camp_editing)("artEditing",t.festival.art_editing)("mapDirection",t.festival.map_direction)("pin",t.festival.pin)("directionsText",t.festival.directions)("directions",t.festival.directions!==null)("requirePin",t.festival.pin!==null)("vanity",t.festival.vanity),l(2),p("server",t.mastodonServer(t.festival.mastodon_handle))("username",t.mastodonUsername(t.festival.mastodon_handle))("inboxEmail",t.festival.inbox_email)("rssFeed",t.festival.rss_feed),l(2),p("identifier",t.festival.volunteeripate_identifier)("domain",t.festival.volunteeripate_domain)("uniqueId",t.festival.vanity),l(2),p("maxTypes",t.festival.max_event_types)("eventTypes",t.festival.event_types),l(6),E(t.canDeleteBurn?13:14),l(3),E(t.canDeleteBurn?-1:16),l(4),E(t.canDeleteBurn?20:21)}}var $=class ${constructor(){this.api=b(N);this.location=b(ye);this.alert=b(Z);this.canDeleteBurn=!1;this.router=b(we)}ngOnInit(){return C(this,null,function*(){var i;this.vanity&&(this.festival=yield this.api.getFestivalByVanity(this.vanity,!0,!1),this.festival&&!((i=this.festival)!=null&&i.max_event_types)&&(this.festival.max_event_types=2))})}saveEventTypes(i){return C(this,null,function*(){this.festival&&(this.festival.event_types=i.eventTypes,this.festival.max_event_types=i.maxTypes,yield this.api.setEventTypes(this.festival),this.location.back())})}saveVoluneeripateSettings(i){return C(this,null,function*(){this.festival&&(yield this.api.setVolunteeripateSettings(this.festival.vanity,i),this.location.back())})}saveMessageSettings(i){return C(this,null,function*(){this.festival&&(yield this.api.setMessageSettings({mastodon_handle:i.mastodonHandle,inbox_email:i.inboxEmail,festival_vanity:this.festival.vanity,rss_feed:i.rssFeed}),this.location.back())})}deleteBurn(){return C(this,null,function*(){(yield this.clearData(this.canDeleteBurn))&&(this.canDeleteBurn=!0)})}clearData(i){return C(this,null,function*(){var t,e;return this.api.isAdmin(this.api.festivalId)?!(yield ee(this.alert,i?`Are you sure you want to delete ${(t=this.festival)==null?void 0:t.name}?`:"Are you sure you want to delete all camps, art and events?","Delete"))||!(yield ee(this.alert,i?`Are you super sure you want to DELETE ${(e=this.festival)==null?void 0:e.name.toUpperCase()}?`:"Are you super sure you want to DELETE ALL CAMPS, ARTS & EVENTS?","Yes"))?!1:(yield this.api.clearData(i),i||this.api.sendMessage('All camps, art and events have been deleted. Be sure to click "Publish" to apply the changes to the app.'),this.api.clearCache(),i&&(this.api.signOut(),this.router.navigateByUrl("/auth")),!0):(this.api.sendMessage("This feature is not available to you."),!1)})}mastodonUsername(i){return De(i)}mastodonServer(i){return Be(i)}clearEvents(){return C(this,null,function*(){if(!this.api.isAdmin(this.api.festivalId))this.api.sendMessage("This feature is not available to you.");else{if(!(yield ee(this.alert,"Are you sure you want to delete all events?","Delete"))||!(yield ee(this.alert,"Are you super sure you want DELETE events?","Yes")))return;yield this.api.clearEvents(),this.api.sendMessage('All events have been deleted. Be sure to click "Publish" to apply the changes to the app.'),this.api.clearCache()}})}};$.\u0275fac=function(t){return new(t||$)},$.\u0275cmp=y({type:$,selectors:[["app-settings"]],inputs:{vanity:"vanity"},decls:9,vars:2,consts:[["color","primary"],["slot","start"],["routerLink","../"],[3,"fullscreen"],[1,"border"],[1,"pad-below","ion-padding-top"],[3,"enabled","eventRegistration","eventEditing","campEditing","artEditing","mapDirection","pin","directionsText","directions","requirePin","vanity"],[3,"saved","server","username","inboxEmail","rssFeed"],[3,"saved","identifier","domain","uniqueId"],[3,"eventTypesChange","maxTypes","eventTypes"],[1,"ion-align-items-center"],["size","auto",1,"ion-justify-content-end"],["color","dark",3,"click"]],template:function(t,e){t&1&&(o(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),f(3,"ion-back-button"),r(),o(4,"ion-title",2),s(5,"Settings"),r()()(),o(6,"ion-content",3)(7,"div",4),w(8,at,25,23,"div",5),r()()),t&2&&(l(6),p("fullscreen",!0),l(2),E(e.festival?8:-1))},dependencies:[Pe,Me,Ie,k,D,T,M,B,Se,re,xe,Re,Ae,Le,be,U,pe,Ve,Fe,ce,ue],encapsulation:2});var Oe=$;export{Oe as SettingsPage};
