import{b as Te}from"./chunk-SNEDPXUY.js";import{a as Q}from"./chunk-4MBMHUBT.js";import{a as J,c as R}from"./chunk-LADCEZG6.js";import"./chunk-5W5FH4VE.js";import"./chunk-2RWSG5RW.js";import"./chunk-G3CKXV7X.js";import"./chunk-5FZVM2DH.js";import"./chunk-HC6MZPB3.js";import"./chunk-YMI2B6JE.js";import"./chunk-4JPLRTL2.js";import"./chunk-NPRM7GGH.js";import"./chunk-52VTL4OE.js";import"./chunk-VBU7NMPV.js";import"./chunk-2EOHHFOF.js";import"./chunk-JXIEZMHN.js";import"./chunk-3GGVU3XB.js";import"./chunk-MCRJI3T3.js";import"./chunk-5ZNPFCKO.js";import"./chunk-46PQVYTJ.js";import"./chunk-MM5QLNJM.js";import"./chunk-3573TPBU.js";import{S as Se,z as Ee}from"./chunk-SZWMGHJI.js";import{D as z,h as we,j as be}from"./chunk-DROAC6NZ.js";import"./chunk-MIGJGGKJ.js";import{A as c,B as u,Da as s,Dc as Ce,Ec as ye,Fa as y,H as K,Ia as g,Ja as _,Ka as h,Nb as me,S as l,Sb as T,T as X,Tb as $,Ub as x,Va as re,Vb as M,Wb as k,X as V,Y as w,Yb as I,Zb as pe,_a as se,_b as ce,aa as b,dc as ue,ea as f,ec as ge,fb as le,fc as A,gb as de,ha as E,hc as D,kc as _e,la as o,ma as r,na as v,ob as F,pa as S,pb as q,pc as he,qa as d,qc as fe,ra as p,sb as N,ub as W,w as P,wc as ve,xa as L,xc as O,ya as B,za as U}from"./chunk-JQETABDO.js";import"./chunk-35XJAIHY.js";import"./chunk-7KGURMOZ.js";import"./chunk-2BF6BOWA.js";import"./chunk-OA2QWUMP.js";import"./chunk-3J2H4E5C.js";import"./chunk-KBMMZLX2.js";import"./chunk-5J6JP6Q2.js";import"./chunk-4U6PRYVA.js";import"./chunk-HJX2WMCX.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{h as C}from"./chunk-LNJ3S2LQ.js";var Re=["link"],Pe=["eventLink"];function Ve(m,i){if(m&1){let t=S();o(0,"ion-list",4)(1,"ion-item",5)(2,"ion-icon",2),d("click",function(){c(t);let n=p();return u(n.message("Camp Registration URL","Copy this link and use it on your website to allow people to register their camp."))}),r(),s(3),o(4,"ion-button",6),d("click",function(){c(t);let n=p();return u(n.copy())}),s(5,"Copy"),r()()(),v(6,"input",7,0)}if(m&2){let t=p();l(3),y(" ",t.url," "),l(3),f("hidden",!0)("value",t.url)}}function We(m,i){if(m&1){let t=S();o(0,"ion-list",4)(1,"ion-item",5)(2,"ion-icon",2),d("click",function(){c(t);let n=p();return u(n.message("Event Registration URL","Copy this link and use it on your website to allow people to register their event."))}),r(),s(3),o(4,"ion-button",6),d("click",function(){c(t);let n=p();return u(n.copyEventUrl())}),s(5,"Copy"),r()()(),v(6,"input",7,1)}if(m&2){let t=p();l(3),y(" ",t.eventUrl," "),l(3),f("hidden",!0)("value",t.eventUrl)}}function Ae(m,i){if(m&1){let t=S();o(0,"ion-item",4)(1,"ion-input",8),h("ngModelChange",function(n){c(t);let a=p();return _(a.pin,n)||(a.pin=n),u(n)}),d("ionChange",function(){c(t);let n=p();return u(n.changed())}),r()()}if(m&2){let t=p();l(),g("ngModel",t.pin)}}function De(m,i){if(m&1){let t=S();o(0,"ion-item",4)(1,"ion-textarea",9),h("ngModelChange",function(n){c(t);let a=p();return _(a.directionsText,n)||(a.directionsText=n),u(n)}),d("ionChange",function(){c(t);let n=p();return u(n.changed())}),r()()}if(m&2){let t=p();l(),f("spellcheck",!0)("rows",6)("autoGrow",!0),g("ngModel",t.directionsText)}}var H=class H{constructor(i){this.api=i;this.toastButtons=[{text:"Dismiss",role:"cancel"}];this.url="";this.eventUrl="";this.directionsText=void 0;Se({informationCircleOutline:Ee})}ngOnInit(){let i=this.api.vanity();this.url=`${document.location.protocol}//${document.location.host}/${i}/camps`,this.eventUrl=`${document.location.protocol}//${document.location.host}/${i}/events`}copy(){let i=this.link.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}copyEventUrl(){let i=this.eventLink.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}changed(){this.requirePin||(this.pin=void 0),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.api.festivalId&&(this.pin>9999&&(this.pin=9999),this.api.updateFestivalSettings({id:this.api.festivalId,camp_registration:this.enabled,event_registration:this.eventRegistration,event_editing:this.eventEditing,camp_editing:this.campEditing,art_editing:this.artEditing,map_direction:this.mapDirection,directions:this.directions?this.directionsText:void 0,pin:this.requirePin?this.pin:void 0}))},3e3)}message(i,t){this.api.sendMessage(t,0,i)}};H.\u0275fac=function(t){return new(t||H)(X(z))},H.\u0275cmp=w({type:H,selectors:[["app-camp-registration"]],viewQuery:function(t,e){if(t&1&&(L(Re,5),L(Pe,5)),t&2){let n;B(n=U())&&(e.link=n.first),B(n=U())&&(e.eventLink=n.first)}},inputs:{enabled:"enabled",eventRegistration:"eventRegistration",eventEditing:"eventEditing",campEditing:"campEditing",artEditing:"artEditing",requirePin:"requirePin",mapDirection:"mapDirection",directions:"directions",directionsText:"directionsText",pin:"pin"},decls:37,vars:11,consts:[["link",""],["eventLink",""],["slot","start","name","information-circle-outline",3,"click"],["labelPlacement","start",3,"ionChange","ngModelChange","ngModel"],["lines","none"],[1,"url"],["id","open-toast","slot","end",3,"click"],["type","text",3,"hidden","value"],["maxlength","4","type","number","placeholder","PIN",3,"ngModelChange","ionChange","ngModel"],["labelPlacement","stacked","label","Directions","placeholder","Describe how an attendee will get to the event",3,"ngModelChange","ionChange","spellcheck","rows","autoGrow","ngModel"]],template:function(t,e){t&1&&(o(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),s(3," Options "),r()(),o(4,"ion-card-content")(5,"ion-item")(6,"ion-icon",2),d("click",function(){return e.message("Camp Registration","Choose whether camp registration is allowed.")}),r(),o(7,"ion-toggle",3),d("ionChange",function(){return e.changed()}),h("ngModelChange",function(a){return _(e.enabled,a)||(e.enabled=a),a}),s(8,"Allow Camp Registration"),r()(),b(9,Ve,8,3),o(10,"ion-item")(11,"ion-icon",2),d("click",function(){return e.message("Event Editing","Allows events or music to be edited.")}),r(),o(12,"ion-toggle",3),d("ionChange",function(){return e.changed()}),h("ngModelChange",function(a){return _(e.eventEditing,a)||(e.eventEditing=a),a}),s(13,"Allow Event & Music Editing"),r()(),o(14,"ion-item")(15,"ion-icon",2),d("click",function(){return e.message("Event Registration","Choose whether event registration is allowed by users who are not theme camp leads or artists.")}),r(),o(16,"ion-toggle",3),d("ionChange",function(){return e.changed()}),h("ngModelChange",function(a){return _(e.eventRegistration,a)||(e.eventRegistration=a),a}),s(17,"Allow Event Registration by the public"),r()(),b(18,We,8,3),o(19,"ion-item")(20,"ion-icon",2),d("click",function(){return e.message("Camp Editing","Allows camps that have already registered to edit their camp details.")}),r(),o(21,"ion-toggle",3),d("ionChange",function(){return e.changed()}),h("ngModelChange",function(a){return _(e.campEditing,a)||(e.campEditing=a),a}),s(22,"Allow Camp Editing"),r()(),o(23,"ion-item")(24,"ion-icon",2),d("click",function(){return e.message("Art Editing","Allows art owners that have already registered to edit their art details.")}),r(),o(25,"ion-toggle",3),d("ionChange",function(){return e.changed()}),h("ngModelChange",function(a){return _(e.artEditing,a)||(e.artEditing=a),a}),s(26,"Allow Art Editing"),r()(),o(27,"ion-item")(28,"ion-icon",2),d("click",function(){return e.message("Require PIN","Whether to require a PIN to be entered to access the event.")}),r(),o(29,"ion-toggle",3),d("ionChange",function(){return e.changed()}),h("ngModelChange",function(a){return _(e.requirePin,a)||(e.requirePin=a),a}),s(30,"Require PIN"),r()(),b(31,Ae,2,1,"ion-item",4),o(32,"ion-item")(33,"ion-icon",2),d("click",function(){return e.message("Directions","Whether to show text when the directions button is clicked.")}),r(),o(34,"ion-toggle",3),d("ionChange",function(){return e.changed()}),h("ngModelChange",function(a){return _(e.directions,a)||(e.directions=a),a}),s(35,"Text Based Directions"),r()(),b(36,De,2,4,"ion-item",4),r()()),t&2&&(l(7),g("ngModel",e.enabled),l(2),E(e.enabled?9:-1),l(3),g("ngModel",e.eventEditing),l(4),g("ngModel",e.eventRegistration),l(2),E(e.eventEditing?18:-1),l(3),g("ngModel",e.campEditing),l(4),g("ngModel",e.artEditing),l(4),g("ngModel",e.requirePin),l(2),E(e.requirePin?31:-1),l(3),g("ngModel",e.directions),l(2),E(e.directions?36:-1))},dependencies:[Ce,O,ve,ye,W,F,N,q,T,D,A,M,I,k,x],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:var(--fr3)!important}.url[_ngcontent-%COMP%]{color:var(--ion-color-dark)}ion-icon[_ngcontent-%COMP%]{cursor:pointer}"]});var ee=H;var Le=["link"],Be=["link2"],Ue=["link3"],Z=class Z{constructor(i){this.api=i;this.campsUrl="";this.eventsUrl="";this.artUrl=""}ngOnInit(){var i,t,e;this.campsUrl=`https://${(i=this.festival)==null?void 0:i.vanity}.dust.events/camps/`,this.eventsUrl=`https://${(t=this.festival)==null?void 0:t.vanity}.dust.events/events/`,this.artUrl=`https://${(e=this.festival)==null?void 0:e.vanity}.dust.events/art/`}copyCampsUrl(){let i=this.link.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}copyArtUrl(){let i=this.link3.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}copyEventsUrl(){let i=this.link2.nativeElement;i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value),this.api.sendMessage(`Copied ${i.value} to the clipboard`,1)}};Z.\u0275fac=function(t){return new(t||Z)(X(z))},Z.\u0275cmp=w({type:Z,selectors:[["app-web-links"]],viewQuery:function(t,e){if(t&1&&(L(Le,5),L(Be,5),L(Ue,5)),t&2){let n;B(n=U())&&(e.link=n.first),B(n=U())&&(e.link2=n.first),B(n=U())&&(e.link3=n.first)}},inputs:{festival:"festival"},decls:36,vars:9,consts:[["link",""],["link2",""],["link3",""],[2,"width","100%"],["color","primary","routerLink","./css",2,"margin-left","auto"],["lines","none"],["slot","end"],["fill","solid","color","primary","id","open-toast",3,"click"],["fill","solid","color","primary","id","open-toast","slot","end",3,"click"],["type","text",3,"hidden","value"]],template:function(t,e){if(t&1){let n=S();o(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title",3)(3,"ion-buttons"),s(4," Web "),o(5,"ion-button",4),s(6,"CSS"),r()()()(),o(7,"ion-card-content")(8,"ion-list",5)(9,"span"),s(10,"This link for a web page of all theme camp can be used on your website:"),r(),o(11,"ion-item"),s(12),o(13,"ion-buttons",6)(14,"ion-button",7),d("click",function(){return c(n),u(e.copyCampsUrl())}),s(15,"Copy"),r()()(),o(16,"span"),s(17,"This link for a web page of all events can be used on your website:"),r(),o(18,"ion-item"),s(19),o(20,"ion-buttons",6)(21,"ion-button",8),d("click",function(){return c(n),u(e.copyEventsUrl())}),s(22,"Copy"),r()()(),o(23,"span"),s(24,"This link for a web page of art can be used on your website:"),r(),o(25,"ion-item"),s(26),o(27,"ion-buttons",6)(28,"ion-button",7),d("click",function(){return c(n),u(e.copyArtUrl())}),s(29,"Copy"),r()()()(),v(30,"input",9,0)(32,"input",9,1)(34,"input",9,2),r()()}t&2&&(l(12),y(" ",e.campsUrl," "),l(7),y(" ",e.eventsUrl," "),l(7),y(" ",e.artUrl," "),l(4),f("hidden",!0)("value",e.campsUrl),l(2),f("hidden",!0)("value",e.eventsUrl),l(2),f("hidden",!0)("value",e.artUrl))},dependencies:[$,T,D,I,M,x,k,A,de],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:var(--fr3)!important}"]});var ne=Z;var j=class j{constructor(){this.username=V("");this.server=V("");this.inboxEmail=V("");this.rssFeed=V("");this.saved=K();this.alert=P(Q)}save(){return C(this,null,function*(){if(this.username()==""&&this.server()==""&&this.inboxEmail()==""&&this.rssFeed()==""){this.saved.emit({mastodonHandle:"",inboxEmail:"",rssFeed:""});return}if(this.username().length<2&&this.server().length>0){yield R(this.alert,"Your mastodon username must be specified");return}if(this.server().length<2&&this.username().length>0){yield R(this.alert,"The mastodon server must be specified");return}if(!this.server().includes(".")&&this.username().length>0){yield R(this.alert,"The mastodon server is not valid");return}if(!this.validUsername(this.username())&&this.server().length>0){yield R(this.alert,"The mastodon username is not valid");return}if(!this.validServername(this.server())&&this.username().length>0){yield R(this.alert,"The mastodon server is not valid");return}this.saved.emit({mastodonHandle:`@${this.username()}@${this.server()}`,inboxEmail:this.inboxEmail(),rssFeed:this.rssFeed()})})}validUsername(i){return/^[a-zA-Z0-9_]+$/.test(i)}validServername(i){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?)*$/.test(i)}reset(){this.username.set(""),this.server.set(""),this.inboxEmail.set("")}};j.\u0275fac=function(t){return new(t||j)},j.\u0275cmp=w({type:j,selectors:[["app-message-settings"]],inputs:{username:[1,"username"],server:[1,"server"],inboxEmail:[1,"inboxEmail"],rssFeed:[1,"rssFeed"]},outputs:{username:"usernameChange",server:"serverChange",inboxEmail:"inboxEmailChange",rssFeed:"rssFeedChange",saved:"saved"},decls:37,vars:4,consts:[[2,"width","100%"],["lines","none"],["label","Mastodon Username","labelPlacement","stacked","placeholder","Username","helperText","","maxlength","256",3,"ngModelChange","ngModel"],["label","Mastodon Server","labelPlacement","stacked","placeholder","E.g. mastondon.social","helperText","",3,"ngModelChange","ngModel"],["label","Email Address","labelPlacement","stacked","placeholder","","helperText","","maxlength","256",3,"ngModelChange","ngModel"],["label","RSS Feed","labelPlacement","stacked","placeholder","","helperText","","maxlength","512",3,"ngModelChange","ngModel"],["size","small",3,"click"]],template:function(t,e){t&1&&(o(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title",0),s(3," Mastodon "),r()(),o(4,"ion-card-content")(5,"ion-list")(6,"span"),s(7,"Posts to this mastodon account will be sent as notifications to all users in dust who have visited your regional."),v(8,"br"),s(9,"The top 20 posts of this account are shown in dust in the messages section."),r(),o(10,"ion-item",1)(11,"ion-input",2),h("ngModelChange",function(a){return _(e.username,a)||(e.username=a),a}),r(),o(12,"p"),s(13,"@"),r(),o(14,"ion-input",3),h("ngModelChange",function(a){return _(e.server,a)||(e.server=a),a}),r()()()(),o(15,"ion-card-header")(16,"ion-card-title",0),s(17," Email "),r()(),o(18,"ion-card-content")(19,"ion-list")(20,"span"),s(21,"Emails sent to inbox@dust.events from this email address will be sent as notifications to all users in dust who have visited your regional. The email will also show dust in the messages section."),r(),o(22,"ion-item",1)(23,"ion-input",4),h("ngModelChange",function(a){return _(e.inboxEmail,a)||(e.inboxEmail=a),a}),r()()()(),o(24,"ion-card-header")(25,"ion-card-title",0),s(26," RSS "),r()(),o(27,"ion-card-content")(28,"ion-list")(29,"span"),s(30,"New articles in this RSS Feed will be sent as notifications to all users in dust who have visited your event. The article will also show dust in the messages section."),r(),o(31,"ion-item",1)(32,"ion-input",5),h("ngModelChange",function(a){return _(e.rssFeed,a)||(e.rssFeed=a),a}),r()()(),o(33,"ion-button",6),d("click",function(){return e.save()}),s(34,"Apply"),r(),o(35,"ion-button",6),d("click",function(){return e.reset()}),s(36,"Reset"),r()()()),t&2&&(l(11),g("ngModel",e.username),l(3),g("ngModel",e.server),l(9),g("ngModel",e.inboxEmail),l(9),g("ngModel",e.rssFeed))},dependencies:[T,A,O,D,M,I,k,x,W,F,N,q],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:var(--fr3)!important}p[_ngcontent-%COMP%]{font-size:var(--fr3);padding-top:.75rem}"]});var oe=j;var G=class G{constructor(){this.identifier=V("");this.domain=V("");this.uniqueId=V("");this.saved=K();this.alert=P(Q)}save(){return C(this,null,function*(){if(this.identifier()==""&&this.domain()==""){this.saved.emit({identifier:"",domain:""});return}if(this.domain().length<2){yield R(this.alert,"The domain must be specified");return}if(this.identifier().length<2){yield R(this.alert,"The identifier must be specified");return}let i=this.domain().replace(".volunteeripate.com","").replace("http://","").replace("https://","");if(i.includes(".")){yield R(this.alert,"The domain should not contain a period");return}this.saved.emit({identifier:this.identifier(),domain:i})})}reset(){this.identifier.set(""),this.domain.set("")}};G.\u0275fac=function(t){return new(t||G)},G.\u0275cmp=w({type:G,selectors:[["app-volunteeripate-settings"]],inputs:{identifier:[1,"identifier"],domain:[1,"domain"],uniqueId:[1,"uniqueId"]},outputs:{identifier:"identifierChange",domain:"domainChange",uniqueId:"uniqueIdChange",saved:"saved"},decls:19,vars:3,consts:[[2,"width","100%"],["href","https://volunteeripate.com"],["lines","none"],["label","Identifier","labelPlacement","stacked","placeholder","","helperText","Unique identifier for the Volunteeripate event","maxlength","256",3,"ngModelChange","ngModel"],["label","Subdomain","labelPlacement","stacked",3,"ngModelChange","placeholder","helperText","ngModel"],["size","small",3,"click"]],template:function(t,e){t&1&&(o(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title",0),s(3," Volunteeripate "),r()(),o(4,"ion-card-content")(5,"ion-list")(6,"span"),s(7,"Dust can show a volunteers shifts and remind them before the shift begins."),v(8,"br"),o(9,"a",1),s(10,"Volunteeripate"),r(),s(11," is a platform for volunteering and tickets. "),r(),o(12,"ion-item",2)(13,"ion-input",3),h("ngModelChange",function(a){return _(e.identifier,a)||(e.identifier=a),a}),r(),o(14,"ion-input",4),h("ngModelChange",function(a){return _(e.domain,a)||(e.domain=a),a}),r()()(),o(15,"ion-button",5),d("click",function(){return e.save()}),s(16,"Apply"),r(),o(17,"ion-button",5),d("click",function(){return e.reset()}),s(18,"Reset"),r()()()),t&2&&(l(13),g("ngModel",e.identifier),l(),f("helperText","E.g. "+e.uniqueId()+".volunteeripate.com"),g("ngModel",e.domain))},dependencies:[T,A,O,D,M,I,k,x,W,F,N,q],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:var(--fr3)!important}p[_ngcontent-%COMP%]{font-size:var(--fr3);padding-top:.75rem}"]});var ae=G;function Fe(m,i){if(m&1&&s(0),m&2){let t=p(2);y(" Delete ",t.festival.name," ")}}function qe(m,i){m&1&&s(0," Delete ")}function Ne(m,i){if(m&1){let t=S();o(0,"ion-row",11)(1,"ion-col"),s(2),r(),o(3,"ion-col",12)(4,"ion-button",13),d("click",function(){c(t);let n=p(2);return u(n.clearEvents())}),s(5,"Delete Events"),r()()()}if(m&2){let t=p(2);l(2),y(" Delete all events at ",t.festival.name,"? This cannot be undone. ")}}function Oe(m,i){if(m&1&&s(0),m&2){let t=p(2);y(" Delete ",t.festival.name,"? This cannot be undone. ")}}function ze(m,i){if(m&1&&s(0),m&2){let t=p(2);y(" Delete all camps, events and art at ",t.festival.name,"? This cannot be undone. ")}}function Qe(m,i){if(m&1){let t=S();o(0,"div",5),v(1,"app-camp-registration",6)(2,"br")(3,"app-web-links",7)(4,"br"),o(5,"app-message-settings",8),d("saved",function(n){c(t);let a=p();return u(a.saveMessageSettings(n))}),r(),v(6,"br"),o(7,"app-volunteeripate-settings",9),d("saved",function(n){c(t);let a=p();return u(a.saveVoluneeripateSettings(n))}),r(),v(8,"br"),o(9,"app-event-types",10),d("eventTypesChange",function(n){c(t);let a=p();return u(a.saveEventTypes(n))}),r(),v(10,"br"),o(11,"ion-card",0)(12,"ion-card-header")(13,"ion-card-title"),b(14,Fe,1,1)(15,qe,1,0),r()(),o(16,"ion-card-content")(17,"ion-grid"),b(18,Ne,6,1,"ion-row",11),o(19,"ion-row",11)(20,"ion-col"),b(21,Oe,1,1)(22,ze,1,1),r(),o(23,"ion-col",12)(24,"ion-button",13),d("click",function(){c(t);let n=p();return u(n.deleteBurn())}),s(25,"Delete All"),r()()()()()()()}if(m&2){let t=p();l(),f("enabled",t.festival.camp_registration)("eventRegistration",t.festival.event_registration)("eventEditing",t.festival.event_editing)("campEditing",t.festival.camp_editing)("artEditing",t.festival.art_editing)("mapDirection",t.festival.map_direction)("pin",t.festival.pin)("directionsText",t.festival.directions)("directions",t.festival.directions!==null)("requirePin",t.festival.pin!==null),l(2),f("festival",t.festival),l(2),f("server",t.mastodonServer(t.festival.mastodon_handle))("username",t.mastodonUsername(t.festival.mastodon_handle))("inboxEmail",t.festival.inbox_email)("rssFeed",t.festival.rss_feed),l(2),f("identifier",t.festival.volunteeripate_identifier)("domain",t.festival.volunteeripate_domain)("uniqueId",t.festival.vanity),l(2),f("maxTypes",t.festival.max_event_types)("eventTypes",t.festival.event_types),l(5),E(t.canDeleteBurn?14:15),l(4),E(t.canDeleteBurn?-1:18),l(3),E(t.canDeleteBurn?21:22)}}var Y=class Y{constructor(){this.api=P(z);this.location=P(re);this.alert=P(Q);this.canDeleteBurn=!1;this.router=P(le)}ngOnInit(){return C(this,null,function*(){var i;this.vanity&&(this.festival=yield this.api.getFestivalByVanity(this.vanity,!0,!1),this.festival&&!((i=this.festival)!=null&&i.max_event_types)&&(this.festival.max_event_types=2))})}saveEventTypes(i){return C(this,null,function*(){this.festival&&(this.festival.event_types=i.eventTypes,this.festival.max_event_types=i.maxTypes,yield this.api.setEventTypes(this.festival),this.location.back())})}saveVoluneeripateSettings(i){return C(this,null,function*(){this.festival&&(yield this.api.setVolunteeripateSettings(this.festival.vanity,i),this.location.back())})}saveMessageSettings(i){return C(this,null,function*(){this.festival&&(yield this.api.setMessageSettings({mastodon_handle:i.mastodonHandle,inbox_email:i.inboxEmail,festival_vanity:this.festival.vanity,rss_feed:this.festival.rss_feed}),this.location.back())})}deleteBurn(){return C(this,null,function*(){(yield this.clearData(this.canDeleteBurn))&&(this.canDeleteBurn=!0)})}clearData(i){return C(this,null,function*(){var t,e;return this.api.isAdmin(this.api.festivalId)?!(yield J(this.alert,i?`Are you sure you want to delete ${(t=this.festival)==null?void 0:t.name}?`:"Are you sure you want to delete all camps, art and events?","Delete"))||!(yield J(this.alert,i?`Are you super sure you want to DELETE ${(e=this.festival)==null?void 0:e.name.toUpperCase()}?`:"Are you super sure you want to DELETE ALL CAMPS, ARTS & EVENTS?","Yes"))?!1:(yield this.api.clearData(i),i||this.api.sendMessage('All camps, art and events have been deleted. Be sure to click "Publish" to apply the changes to the app.'),this.api.clearCache(),i&&(this.api.signOut(),this.router.navigateByUrl("/auth")),!0):(this.api.sendMessage("This feature is not available to you."),!1)})}mastodonUsername(i){return we(i)}mastodonServer(i){return be(i)}clearEvents(){return C(this,null,function*(){if(!this.api.isAdmin(this.api.festivalId))this.api.sendMessage("This feature is not available to you.");else{if(!(yield J(this.alert,"Are you sure you want to delete all events?","Delete"))||!(yield J(this.alert,"Are you super sure you want DELETE events?","Yes")))return;yield this.api.clearEvents(),this.api.sendMessage('All events have been deleted. Be sure to click "Publish" to apply the changes to the app.'),this.api.clearCache()}})}};Y.\u0275fac=function(t){return new(t||Y)},Y.\u0275cmp=w({type:Y,selectors:[["app-settings"]],inputs:{vanity:"vanity"},decls:9,vars:2,consts:[["color","primary"],["slot","start"],["routerLink","../"],[3,"fullscreen"],[1,"border"],[1,"pad-below","ion-padding-top"],[3,"enabled","eventRegistration","eventEditing","campEditing","artEditing","mapDirection","pin","directionsText","directions","requirePin"],[3,"festival"],[3,"saved","server","username","inboxEmail","rssFeed"],[3,"saved","identifier","domain","uniqueId"],[3,"eventTypesChange","maxTypes","eventTypes"],[1,"ion-align-items-center"],["size","auto",1,"ion-justify-content-end"],["color","dark",3,"click"]],template:function(t,e){t&1&&(o(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),v(3,"ion-back-button"),r(),o(4,"ion-title",2),s(5,"Settings"),r()()(),o(6,"ion-content",3)(7,"div",4),b(8,Qe,26,23,"div",5),r()()),t&2&&(l(6),f("fullscreen",!0),l(2),E(e.festival?8:-1))},dependencies:[_e,pe,ue,k,x,T,I,M,me,$,ce,ge,he,fe,se,W,ee,ne,Te,oe,ae],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:var(--fr3)!important}"]});var Me=Y;export{Me as SettingsPage};
