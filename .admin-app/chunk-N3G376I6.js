import{a as W}from"./chunk-EWTSRLY7.js";import{a as H}from"./chunk-TOSLD3EX.js";import"./chunk-WVEW2PMG.js";import"./chunk-TUKQZ63R.js";import{R as V,a as q}from"./chunk-OAPJ7RFL.js";import{x as U}from"./chunk-SNNE7GZP.js";import{$ as u,Aa as p,Ba as v,Ka as M,Lb as R,Qb as E,Rb as L,S as a,T as m,X as h,Xa as b,Yb as k,ab as x,cb as P,cc as A,da as c,db as T,dc as B,ec as F,fc as $,ga as d,gb as S,gc as j,ha as I,ia as _,ja as C,ka as n,la as o,ma as s,nc as D,oc as N,pa as y,qa as f,sb as w,uc as O}from"./chunk-SLKJQVFW.js";import"./chunk-35XJAIHY.js";import"./chunk-7KGURMOZ.js";import"./chunk-W5R2B4OG.js";import"./chunk-SDKY465T.js";import"./chunk-45ASMX5N.js";import"./chunk-KM5AR3OJ.js";import"./chunk-XCRBEL2Y.js";import"./chunk-4U6PRYVA.js";import"./chunk-HJX2WMCX.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{h as g}from"./chunk-LNJ3S2LQ.js";var G=i=>[i];function J(i,e){if(i&1&&(n(0,"ion-item",11)(1,"ion-label"),p(2),o(),n(3,"ion-note",3),p(4),o()()),i&2){let t=e.$implicit;c("routerLink","../music/"+M(3,G,t.id)),a(2),v(t.title),a(2),v(t.camp)}}function K(i,e){if(i&1&&(n(0,"ion-list"),_(1,J,5,5,"ion-item",11,I),o()),i&2){let t=f(2);a(),C(t.music)}}function Q(i,e){i&1&&s(0,"ion-item")}function X(i,e){if(i&1&&(n(0,"div",8)(1,"app-image-card",9),u(2,K,3,0,"ion-list")(3,Q,1,0,"ion-item"),o()(),s(4,"div",10)),i&2){let t=f();a(),c("url",t.camp?t.image(t.camp):t.festivalImage())("title",t.title)("description",t.description),a(),d(t.music.length>0?2:3)}}var r=class r{constructor(e,t,l){this.api=e;this.router=t;this.route=l;this.music=[];this.busy=!0;this.title="";this.description="";V({add:q})}image(e){return this.api.imageURL(e.imageUrl)}festivalImage(){return this.api.imageURL(this.api.festivalImage())}ionViewWillEnter(){return g(this,null,function*(){yield this.api.setFestivalByVanity(this.vanity),this.campId=this.route.snapshot.queryParams.camp,this.camp=this.campId?yield this.api.getCamp(this.campId):void 0,this.title=this.camp?`${this.camp.name}`:`${this.api.festivalTitle()}`,this.music=this.filter(yield this.api.music()),this.music.sort((e,t)=>e.title&&t.title?e.title.localeCompare(t.title):0),this.description=this.music.length>0?`Parties at ${this.title}`:`There are no parties for ${this.title}.`,this.busy=!1})}filter(e){return this.campId?e.filter(t=>t.campId==this.campId):e}newMusic(){this.router.navigate(["./new"],{queryParams:{camp:this.campId},relativeTo:this.route})}};r.\u0275fac=function(t){return new(t||r)(m(U),m(P),m(x))},r.\u0275cmp=h({type:r,selectors:[["app-music"]],inputs:{vanity:"vanity"},decls:12,vars:2,consts:[["color","primary"],["slot","start"],["routerLink","../"],["slot","end"],["routerLink","../music/new"],["name","add"],[3,"fullscreen"],["title","Add Party",3,"press"],[1,"border"],["routeTo","../music/new",3,"url","title","description"],[1,"ion-padding"],[3,"routerLink"]],template:function(t,l){t&1&&(n(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),s(3,"ion-back-button"),o(),n(4,"ion-title",2),p(5,"Music"),o(),n(6,"ion-buttons",3)(7,"ion-button",4),s(8,"ion-icon",5),o()()()(),n(9,"ion-content",6),u(10,X,5,4),n(11,"app-footer",7),y("press",function(){return l.newMusic()}),o()()),t&2&&(a(9),c("fullscreen",!0),a(),d(l.busy?-1:10))},dependencies:[b,W,w,S,T,A,N,L,F,j,R,D,E,k,O,$,B,H],styles:["ion-fab[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px}ion-fab-button[_ngcontent-%COMP%]{margin-top:-35px;padding:5px}ion-item[_ngcontent-%COMP%]{cursor:pointer}"]});var z=r;export{z as MusicPage};
