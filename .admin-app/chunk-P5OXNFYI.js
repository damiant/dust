import{c as u}from"./chunk-OZ2IKH4J.js";import{I as ue,ja as de}from"./chunk-LIWDDRYP.js";import{K as me,e as f,g as A,v as ce}from"./chunk-5GFD3MFK.js";import"./chunk-PFLI22GG.js";import{$ as C,Aa as _,Ab as U,Ba as E,Bc as ne,Db as j,Ec as re,Fa as h,Fc as ae,Ga as g,H as a,Ha as y,Ia as k,Ic as oe,Nc as le,P as W,Sc as se,Tc as pe,Wb as Y,X as O,Y as H,Za as D,_ as R,aa as I,ba as d,ca as o,cc as G,da as l,dc as z,ea as V,ec as J,fc as K,gc as X,ic as Z,ja as M,la as B,lc as $,na as v,p as b,ra as P,rc as ee,s as c,sa as S,sc as te,t as m,ta as T,tb as x,ub as F,vb as N,vc as ie,wb as Q,xb as L}from"./chunk-FDEJMFAU.js";import"./chunk-JORYF43P.js";import"./chunk-7KGURMOZ.js";import"./chunk-UT2PGJWE.js";import"./chunk-6Y2ASLSF.js";import"./chunk-XRJ4SE6F.js";import"./chunk-LIBYTRNP.js";import"./chunk-3MK77LPM.js";import"./chunk-4U6PRYVA.js";import"./chunk-CZ4AHVKD.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-LLZYEWEK.js";import"./chunk-Z2GS73PT.js";import"./chunk-LF5XB4YN.js";import{h as q}from"./chunk-LNJ3S2LQ.js";var ge=["name"],ye=["email"];function fe(s,n){if(s&1&&(o(0,"ion-select-option",13),_(1),l()),s&2){let t=n.$implicit;d("value",t),a(),E(t)}}function _e(s,n){if(s&1&&(o(0,"ion-select-option",13),_(1),l()),s&2){let t=n.$implicit;d("value",t),a(),E(t)}}function we(s,n){if(s&1){let t=M();o(0,"ion-item")(1,"ion-input",18),y("ngModelChange",function(r){c(t);let p=v();return g(p.helpRequest.campOrArt,r)||(p.helpRequest.campOrArt=r),m(r)}),l()()}if(s&2){let t=v();a(),d("label",k(t.getQuestion())),h("ngModel",t.helpRequest.campOrArt)}}var w=class w{constructor(){this.api=b(me);this.alert=b(oe);this.location=b(D);this.unknown="A burn not in dust yet";this.selectBurn="";this.selectTopic="";this.sending=!1;this.reset={name:"",email:"",burn:this.selectBurn,topic:this.selectTopic,description:"",campOrArt:""};this.helpRequest=this.reset;this.categories=["Event Registration","Camp Registration","Art Registration","Access to a Camp","Using Dust","Other Enquiry"];this.burns=[this.selectBurn];de({helpOutline:ue})}ngOnInit(){return q(this,null,function*(){this.helpRequest.email=this.api.userEmail(),this.helpRequest.burn=this.api.festivalTitle(),this.burns=(yield this.api.getUnAuthedBurns()).map(n=>n.name),this.burns.push(this.unknown)})}getQuestion(){let n=this.helpRequest.topic;return n==="Art Registration"?"What art is this about?":n==="Event Registration"?"What camp or art is this about?":n?"Is this related to a camp or art? If so, please specify":""}getHelperText(){return{"Event Registration":"Important: Don't forget to mention the camp or art associated with the event.","Camp Registration":"Important: Don't forget to mention your camp name.","Art Registration":"Important: Don't forget to mention your art piece name.","Access to a Camp":"Important: Don't forget to mention the camp name you need access to.","Using Dust":"Important: Describe the specific feature or page you need help with.","Other Enquiry":"Important: Don't forget to mention your camp name if applicable."}[this.helpRequest.topic]||"Important: Don't forget to mention your camp name"}submit(){return q(this,null,function*(){if(f(this.helpRequest.name)){yield u(this.alert,"Please enter your name.","Error"),yield A(200),this.name.setFocus();return}if(f(this.helpRequest.email)||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.helpRequest.email)){yield u(this.alert,"A valid email is required.","Error"),yield A(200),this.email.setFocus();return}if(f(this.helpRequest.description)){yield u(this.alert,"Description is required. Please provide a description of your enquiry.","Error");return}if(f(this.helpRequest.burn)){yield u(this.alert,"Please select a burn.","Error");return}if(f(this.helpRequest.topic)){yield u(this.alert,"Please select a topic.","Error");return}try{if(ce(this.helpRequest),!f(this.helpRequest.campOrArt)){let n=this.helpRequest.topic,t="";n==="Art Registration"?t=`Art: ${this.helpRequest.campOrArt}`:n==="Event Registration"?t=`Camp or Art: ${this.helpRequest.campOrArt}`:t=`Camp: ${this.helpRequest.campOrArt}`,this.helpRequest.description=`${t}

${this.helpRequest.description}`}this.sending=!0,yield this.api.submitForm(this.helpRequest),this.helpRequest=this.reset,yield u(this.alert,"Your help request has been submitted. We will get back to you via email soon.","Success"),this.location.back(),this.sending=!1}catch{yield u(this.alert,"There was an error submitting your request. Please try again.","Error")}finally{}})}};w.\u0275fac=function(t){return new(t||w)},w.\u0275cmp=W({type:w,selectors:[["app-help"]],viewQuery:function(t,e){if(t&1&&(P(ge,5),P(ye,5)),t&2){let r;S(r=T())&&(e.name=r.first),S(r=T())&&(e.email=r.first)}},decls:35,vars:9,consts:[["name",""],["email",""],["color","primary"],["slot","start"],[3,"fullscreen"],[1,"border"],[3,"ngSubmit"],["lines","none"],["label","Your Name","labelPlacement","stacked","name","name","required","",3,"ngModelChange","ngModel"],["label","Email Address","labelPlacement","stacked","name","email","type","email","required","",3,"ngModelChange","ngModel"],["lines","none",1,"app-select"],[1,"select-container"],["placeholder","Select Burn","labelPlacement","stacked","interface","popover","label","Which burn is this about?","name","burn",1,"app-select",3,"ngModelChange","ngModel"],[3,"value"],["labelPlacement","stacked","interface","popover","label","What can we help with?","placeholder","Select Topic","name","category",1,"app-select",3,"ngModelChange","ngModel"],["labelPlacement","stacked","label","Describe how we can help you?","name","description","rows","6","required","",3,"ngModelChange","helperText","ngModel"],[1,"center"],["type","submit",3,"disabled"],["labelPlacement","stacked","name","campOrArt",3,"ngModelChange","label","ngModel"]],template:function(t,e){if(t&1){let r=M();o(0,"ion-header")(1,"ion-toolbar",2)(2,"ion-buttons",3),V(3,"ion-back-button"),l(),o(4,"ion-title"),_(5,"Help"),l()()(),o(6,"ion-content",4)(7,"div",5)(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),_(11,"Need Assistance?"),l()(),o(12,"ion-card-content")(13,"form",6),B("ngSubmit",function(){return c(r),m(e.submit())}),o(14,"ion-list",7)(15,"ion-item")(16,"ion-input",8,0),y("ngModelChange",function(i){return c(r),g(e.helpRequest.name,i)||(e.helpRequest.name=i),m(i)}),l()(),o(18,"ion-item")(19,"ion-input",9,1),y("ngModelChange",function(i){return c(r),g(e.helpRequest.email,i)||(e.helpRequest.email=i),m(i)}),l()(),o(21,"ion-item",10)(22,"div",11)(23,"ion-select",12),y("ngModelChange",function(i){return c(r),g(e.helpRequest.burn,i)||(e.helpRequest.burn=i),m(i)}),C(24,fe,2,2,"ion-select-option",13,R),l(),o(26,"ion-select",14),y("ngModelChange",function(i){return c(r),g(e.helpRequest.topic,i)||(e.helpRequest.topic=i),m(i)}),C(27,_e,2,2,"ion-select-option",13,R),l()()(),O(29,we,2,3,"ion-item"),o(30,"ion-item")(31,"ion-textarea",15),y("ngModelChange",function(i){return c(r),g(e.helpRequest.description,i)||(e.helpRequest.description=i),m(i)}),l()()(),o(32,"div",16)(33,"ion-button",17),_(34,"Submit Request"),l()()()()()()()}t&2&&(a(6),d("fullscreen",!0),a(10),h("ngModel",e.helpRequest.name),a(3),h("ngModel",e.helpRequest.email),a(4),h("ngModel",e.helpRequest.burn),a(),I(e.burns),a(2),h("ngModel",e.helpRequest.topic),a(),I(e.categories),a(2),H(e.getQuestion()?29:-1),a(2),d("helperText",e.getHelperText()),h("ngModel",e.helpRequest.description),a(2),d("disabled",e.sending))},dependencies:[Z,X,j,L,x,F,U,Q,N,ee,ae,z,Y,re,G,$,J,K,ie,te,le,pe,se,ne],styles:[".required[_ngcontent-%COMP%]{color:var(--ion-color-danger)}p[_ngcontent-%COMP%]{margin-bottom:var(--spacing-1xl)}.select-container[_ngcontent-%COMP%]{display:flex;width:100%;gap:var(--spacing-lg)}@media (max-width: 500px){.select-container[_ngcontent-%COMP%]{flex-direction:column;height:200px}}ion-select[_ngcontent-%COMP%]{width:100%}"]});var he=w;export{he as HelpPage};
