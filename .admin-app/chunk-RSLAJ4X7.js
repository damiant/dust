import{a as p,c}from"./chunk-OZ2IKH4J.js";import{I as l,K as d}from"./chunk-5GFD3MFK.js";import{Ic as v,l as h,p as f}from"./chunk-FDEJMFAU.js";import{h as o}from"./chunk-LNJ3S2LQ.js";var s=class s{constructor(){this.api=f(d);this.alert=f(v)}inviteAllCamps(i,e){return o(this,null,function*(){let t=i.filter(n=>n.contact_email&&n.contact_email.trim());if(t.length===0){yield c(this.alert,"No camps have email addresses to invite.","No Camps");return}(yield this.confirmAction(`Invite ${t.length} ${l(t.length,"camp")}?`,"This will send invitation emails to all camps with email addresses."))&&(yield this.inviteCampBatch(t,e))})}inviteAllArt(i,e){return o(this,null,function*(){let t=i.filter(n=>n.contact_email&&n.contact_email.trim());if(t.length===0){yield c(this.alert,"No artists have email addresses to invite.","No Art");return}(yield this.confirmAction(`Invite ${t.length} ${l(t.length,"artist")}?`,"This will send invitation emails to all artists with email addresses."))&&(yield this.inviteArtBatch(t,e))})}confirmAction(i,e){return o(this,null,function*(){return p(this.alert,`${i}

${e}`,"Confirm")})}inviteCampBatch(i,e){return o(this,null,function*(){try{let t=0,r=0;for(let a=0;a<i.length;a++){try{yield this.api.inviteCamp(i[a]),t++}catch(m){r++,console.error(`Failed to invite ${i[a].name}:`,m)}e.set((a+1)/i.length)}let n=r===0?`Successfully invited ${t} ${l(t,"camp")}.`:`Invited ${t} ${l(t,"camp")}, ${r} failed.`;yield c(this.alert,n,"Invitations Sent")}finally{e.set(0)}})}inviteArtBatch(i,e){return o(this,null,function*(){try{let t=0,r=0;for(let a=0;a<i.length;a++){try{yield this.api.inviteArt(i[a]),t++}catch(m){r++,console.error(`Failed to invite ${i[a].name}:`,m)}e.set((a+1)/i.length)}let n=r===0?`Successfully invited ${t} ${l(t,"artist")}.`:`Invited ${t} ${l(t,"artist")}, ${r} failed.`;yield c(this.alert,n,"Invitations Sent")}finally{e.set(0)}})}};s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"});var u=s;export{u as a};
