import{c as ct}from"./chunk-6EZPDH6L.js";import{a as z}from"./chunk-HSBV6RIN.js";import{a as pt,g as ut}from"./chunk-PNKDLQP2.js";import{a as Ce,c as T}from"./chunk-OZ2IKH4J.js";import"./chunk-ZHFJF7NS.js";import"./chunk-A5RC3O7B.js";import"./chunk-CVA27SDO.js";import"./chunk-U5OWWBBZ.js";import"./chunk-HC6MZPB3.js";import"./chunk-YMI2B6JE.js";import"./chunk-L4IPHJNS.js";import"./chunk-NPRM7GGH.js";import"./chunk-SFJBRZ2Y.js";import"./chunk-I5V6RRU4.js";import"./chunk-2EOHHFOF.js";import"./chunk-JXIEZMHN.js";import"./chunk-ZMJ3RQA5.js";import"./chunk-MCRJI3T3.js";import"./chunk-QDGYTOUC.js";import"./chunk-VLNXCBKY.js";import"./chunk-MM5QLNJM.js";import"./chunk-3573TPBU.js";import{G as ke,R as dt,Y as mt,a as lt,aa as re}from"./chunk-TF5OT4X3.js";import{D as Ee,I as H,e as K,i as rt,k as st}from"./chunk-CXIDEVKY.js";import"./chunk-PFLI22GG.js";import{$ as ye,$b as D,Aa as ee,Ac as it,Ba as V,Cc as ae,D as We,Dc as Q,Ea as _,Fa as h,G as l,Ga as C,Hc as nt,Ic as ot,Jc as Me,Ka as Oe,Kc as at,O as S,Pa as qe,Qa as q,Ra as F,Rb as je,S as Ne,Sa as te,Sb as xe,Ta as M,Ub as Ze,Vb as Ye,W as f,Wa as Be,X as v,Yb as E,Z as Ae,Zb as ne,_ as ve,_b as P,aa as g,ac as U,ba as a,bc as B,ca as r,cc as L,da as I,dc as Ge,ec as we,fb as Qe,gb as He,ia as x,jc as Je,ka as u,kc as be,lc as k,ma as m,mb as ze,mc as oe,nc as R,ob as W,p as b,qa as j,qc as Ke,ra as Z,rb as N,rc as Xe,s as c,sa as Y,sc as $e,t as p,ta as X,ua as $,uc as et,vc as Te,w,wb as ie,wc as Se,yb as A,yc as tt,za as d}from"./chunk-GPCT4GNB.js";import"./chunk-JORYF43P.js";import"./chunk-7KGURMOZ.js";import"./chunk-UT2PGJWE.js";import"./chunk-6Y2ASLSF.js";import"./chunk-XRJ4SE6F.js";import"./chunk-LIBYTRNP.js";import"./chunk-3MK77LPM.js";import"./chunk-4U6PRYVA.js";import"./chunk-CZ4AHVKD.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-LLZYEWEK.js";import"./chunk-Z2GS73PT.js";import"./chunk-LF5XB4YN.js";import{h as y}from"./chunk-LNJ3S2LQ.js";var ht=["link"],Ct=["link2"],ft=["link3"],se=class se{constructor(){this.api=b(H);this.campsUrl="";this.eventsUrl="";this.artUrl="";this.vanity=F("")}ngOnInit(){this.campsUrl=`https://${this.vanity()}.dust.events/camps/`,this.eventsUrl=`https://${this.vanity()}.dust.events/events/`,this.artUrl=`https://${this.vanity()}.dust.events/art/`}message(t,e){this.api.sendMessage(e,0,t)}copyCampsUrl(){let t=this.link.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}copyArtUrl(){let t=this.link3.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}copyEventsUrl(){let t=this.link2.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}};se.\u0275fac=function(e){return new(e||se)},se.\u0275cmp=S({type:se,selectors:[["app-web-links"]],viewQuery:function(e,n){if(e&1&&(j(ht,5),j(Ct,5),j(ft,5)),e&2){let i;Z(i=Y())&&(n.link=i.first),Z(i=Y())&&(n.link2=i.first),Z(i=Y())&&(n.link3=i.first)}},inputs:{vanity:[1,"vanity"]},decls:30,vars:9,consts:[["link",""],["link2",""],["link3",""],[2,"width","100%"],["color","primary","routerLink","./css",2,"margin-left","auto"],["lines","none"],["slot","start","name","information-circle-outline",3,"click"],["fill","solid","slot","end","color","primary","id","open-toast",3,"click"],["fill","solid","color","primary","id","open-toast","slot","end",3,"click"],["slot","end","fill","solid","color","primary","id","open-toast",3,"click"],["type","text",3,"hidden","value"]],template:function(e,n){if(e&1){let i=x();a(0,"ion-card-header")(1,"ion-card-title",3)(2,"ion-buttons"),d(3," Lists "),a(4,"ion-button",4),d(5,"CSS"),r()()(),a(6,"ion-card-subtitle"),d(7," These can be used on your website to display a live list of camps, events and art. "),r()(),a(8,"ion-list",5)(9,"ion-item")(10,"ion-icon",6),u("click",function(){return c(i),p(n.message("Theme Camps Web Page","This link for a web page of all theme camp can be used on your website."))}),r(),d(11),a(12,"ion-button",7),u("click",function(){return c(i),p(n.copyCampsUrl())}),d(13,"Copy"),r()(),a(14,"ion-item")(15,"ion-icon",6),u("click",function(){return c(i),p(n.message("Events Web Page","This link for a web page of all events can be used on your website."))}),r(),d(16),a(17,"ion-button",8),u("click",function(){return c(i),p(n.copyEventsUrl())}),d(18,"Copy"),r()(),a(19,"ion-item")(20,"ion-icon",6),u("click",function(){return c(i),p(n.message("Art Web Page","This link for a web page of art can be used on your website."))}),r(),d(21),a(22,"ion-button",9),u("click",function(){return c(i),p(n.copyArtUrl())}),d(23,"Copy"),r()()(),I(24,"input",10,0)(26,"input",10,1)(28,"input",10,2)}e&2&&(l(11),V(" ",n.campsUrl," "),l(5),V(" ",n.eventsUrl," "),l(5),V(" ",n.artUrl," "),l(3),g("hidden",!0)("value",n.campsUrl),l(2),g("hidden",!0)("value",n.eventsUrl),l(2),g("hidden",!0)("value",n.artUrl))},dependencies:[ne,E,R,ae,L,U,B,k,He],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:var(--fr3)!important}ion-icon[_ngcontent-%COMP%]{cursor:pointer}"]});var Ve=se;var vt=["link"];function yt(s,t){if(s&1){let e=x();a(0,"ion-item",1)(1,"ion-icon",2),u("click",function(){c(e);let i=m();return p(i.message(i.title(),i.description()))}),r(),a(2,"a",3),d(3),r(),a(4,"ion-button",4),u("click",function(){c(e);let i=m();return p(i.copy())}),d(5,"Copy"),r()(),I(6,"input",5,0)}if(s&2){let e=m();l(2),g("href",e.url(),We),l(),ee(e.url()),l(3),g("hidden",!0)("value",e.url())}}var le=class le{constructor(){this.url=F();this.enabled=F(!0);this.title=F("");this.description=F("");this.link=te("link");this.api=b(H);re({informationCircleOutline:ke})}message(t,e){this.api.sendMessage(e,0,t)}copy(){let t=this.link().nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}};le.\u0275fac=function(e){return new(e||le)},le.\u0275cmp=S({type:le,selectors:[["app-url-link"]],viewQuery:function(e,n){e&1&&X(n.link,vt,5),e&2&&$()},inputs:{url:[1,"url"],enabled:[1,"enabled"],title:[1,"title"],description:[1,"description"]},decls:1,vars:1,consts:[["link",""],[1,"url"],["slot","start","name","information-circle-outline",3,"click"],["target","_blank",3,"href"],["id","open-toast","slot","end",3,"click"],["type","text",3,"hidden","value"]],template:function(e,n){e&1&&f(0,yt,8,4),e&2&&v(n.enabled()?0:-1)},dependencies:[k,ae,E],styles:[".url[_ngcontent-%COMP%]{color:var(--ion-color-dark)}ion-icon[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--ion-text-color)}"]});var Fe=le;var xt=["link"],wt=["artLink"],bt=["eventLink"];function Tt(s,t){if(s&1){let e=x();a(0,"ion-item",2)(1,"ion-input",3),C("ngModelChange",function(i){c(e);let o=m(2);return h(o.pin,i)||(o.pin=i),p(i)}),u("ionChange",function(){c(e);let i=m(2);return p(i.changed())}),r()()}if(s&2){let e=m(2);l(),_("ngModel",e.pin)}}function St(s,t){if(s&1){let e=x();a(0,"ion-item",2)(1,"ion-textarea",4),C("ngModelChange",function(i){c(e);let o=m(2);return h(o.directionsText,i)||(o.directionsText=i),p(i)}),u("ionChange",function(){c(e);let i=m(2);return p(i.changed())}),r()()}if(s&2){let e=m(2);l(),g("spellcheck",!0)("rows",6)("autoGrow",!0),_("ngModel",e.directionsText)}}function Mt(s,t){if(s&1){let e=x();a(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),d(3," Options "),r()(),a(4,"ion-card-content")(5,"ion-item")(6,"ion-icon",0),u("click",function(){c(e);let i=m();return p(i.message("Camp/Art Registration","Enable if you allow new camps to be registered. Disable you are not accepting camp registration yet."))}),r(),a(7,"ion-toggle",1),u("ionChange",function(i){c(e);let o=m();return p(o.changed("camp",i))}),C("ngModelChange",function(i){c(e);let o=m();return h(o.enabled,i)||(o.enabled=i),p(i)}),d(8,"Allow Camp/Art Registration"),r()(),a(9,"ion-item")(10,"ion-icon",0),u("click",function(){c(e);let i=m();return p(i.message("Event Registration","Choose whether event registration is allowed by users who are not theme camp leads or artists."))}),r(),a(11,"ion-toggle",1),u("ionChange",function(){c(e);let i=m();return p(i.changed())}),C("ngModelChange",function(i){c(e);let o=m();return h(o.eventRegistration,i)||(o.eventRegistration=i),p(i)}),d(12,"Allow Event Registration by the public"),r()(),a(13,"ion-item")(14,"ion-icon",0),u("click",function(){c(e);let i=m();return p(i.message("Event Editing","Allows events or music to be edited. "))}),r(),a(15,"ion-toggle",1),u("ionChange",function(){c(e);let i=m();return p(i.changed())}),C("ngModelChange",function(i){c(e);let o=m();return h(o.eventEditing,i)||(o.eventEditing=i),p(i)}),d(16,"Allow Event/Music Editing"),r()(),a(17,"ion-item")(18,"ion-icon",0),u("click",function(){c(e);let i=m();return p(i.message("Music Registration","Allow music to be registered at camps, art and mutant vehicles."))}),r(),a(19,"ion-toggle",1),u("ionChange",function(){c(e);let i=m();return p(i.changed())}),C("ngModelChange",function(i){c(e);let o=m();return h(o.musicRegistration,i)||(o.musicRegistration=i),p(i)}),d(20,"Allow Music Registration"),r()(),a(21,"ion-item")(22,"ion-icon",0),u("click",function(){c(e);let i=m();return p(i.message("Art Editing","Allows art owners that have already registered to edit their art details."))}),r(),a(23,"ion-toggle",1),u("ionChange",function(){c(e);let i=m();return p(i.changed())}),C("ngModelChange",function(i){c(e);let o=m();return h(o.artEditing,i)||(o.artEditing=i),p(i)}),d(24,"Allow Art Editing"),r()(),a(25,"ion-item")(26,"ion-icon",0),u("click",function(){c(e);let i=m();return p(i.message("Require PIN","Whether to require a PIN to be entered to access the event."))}),r(),a(27,"ion-toggle",1),u("ionChange",function(){c(e);let i=m();return p(i.changed())}),C("ngModelChange",function(i){c(e);let o=m();return h(o.requirePin,i)||(o.requirePin=i),p(i)}),d(28,"Require PIN"),r()(),f(29,Tt,2,1,"ion-item",2),a(30,"ion-item")(31,"ion-icon",0),u("click",function(){c(e);let i=m();return p(i.message("Directions","Whether to show text when the directions button is clicked."))}),r(),a(32,"ion-toggle",1),u("ionChange",function(){c(e);let i=m();return p(i.changed())}),C("ngModelChange",function(i){c(e);let o=m();return h(o.directions,i)||(o.directions=i),p(i)}),d(33,"Text Based Directions"),r()(),f(34,St,2,4,"ion-item",2),r()()}if(s&2){let e=m();l(7),_("ngModel",e.enabled),l(4),_("ngModel",e.eventRegistration),l(4),_("ngModel",e.eventEditing),l(4),_("ngModel",e.musicRegistration),l(4),_("ngModel",e.artEditing),l(4),_("ngModel",e.requirePin),l(2),v(e.requirePin?29:-1),l(3),_("ngModel",e.directions),l(2),v(e.directions?34:-1)}}function Et(s,t){if(s&1&&(a(0,"ion-card")(1,"ion-card-content")(2,"ion-card-header")(3,"ion-card-title"),d(4," Registration "),r(),a(5,"ion-card-subtitle"),d(6,"Use this link on your website to register camps, events and art."),r()(),I(7,"app-url-link",5),a(8,"ion-accordion-group")(9,"ion-accordion",6)(10,"ion-item",7),d(11,"Advanced"),r(),a(12,"div",8)(13,"ion-list",2)(14,"ion-card-header")(15,"ion-card-subtitle"),d(16,"These can be used on your website to register camps, events and art."),r()(),I(17,"app-url-link",9)(18,"app-url-link",10)(19,"app-url-link",11)(20,"app-web-links",12),r()()()()()()),s&2){let e=m();l(7),g("url",e.burnUrl),l(10),g("url",e.url)("enabled",!!e.enabled),l(),g("url",e.eventUrl)("enabled",!!e.eventEditing),l(),g("url",e.artUrl)("enabled",!!e.enabled),l(),g("vanity",e.vanity())}}var de=class de{constructor(){this.api=b(H);this.toastButtons=[{text:"Dismiss",role:"cancel"}];this.url="";this.burnUrl="";this.artUrl="";this.eventUrl="";this.mapDirection=F();this.directionsText=void 0;this.vanity=F("");this.mode=F("options");re({informationCircleOutline:ke})}ngOnInit(){let t=this.api.vanity();this.burnUrl=`https://${t}.dust.events`,this.url=`${document.location.protocol}//${document.location.host}/${t}/camps`,this.artUrl=`${document.location.protocol}//${document.location.host}/${t}/art`,this.eventUrl=`${document.location.protocol}//${document.location.host}/${t}/events`}copy(){let t=this.link.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}copyArt(){let t=this.artLink.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}copyEventUrl(){let t=this.eventLink.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}changed(t,e){t=="camp"&&e.detail.checked&&(this.campEditing=!0,this.artEditing=!0,this.eventEditing=!0),this.requirePin||(this.pin=void 0),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.api.festivalId&&(this.pin>9999&&(this.pin=9999),this.api.updateFestivalSettings({id:this.api.festivalId,camp_registration:this.enabled,event_registration:this.eventRegistration,music_registration:this.musicRegistration,event_editing:this.eventEditing,camp_editing:this.campEditing,art_editing:this.artEditing,map_direction:this.mapDirection(),directions:this.directions?this.directionsText:void 0,pin:this.requirePin?this.pin:void 0}))},3e3)}message(t,e){this.api.sendMessage(e,0,t)}};de.\u0275fac=function(e){return new(e||de)},de.\u0275cmp=S({type:de,selectors:[["app-camp-registration"]],viewQuery:function(e,n){if(e&1&&(j(xt,5),j(wt,5),j(bt,5)),e&2){let i;Z(i=Y())&&(n.link=i.first),Z(i=Y())&&(n.artLink=i.first),Z(i=Y())&&(n.eventLink=i.first)}},inputs:{enabled:"enabled",eventRegistration:"eventRegistration",musicRegistration:"musicRegistration",eventEditing:"eventEditing",campEditing:"campEditing",artEditing:"artEditing",requirePin:"requirePin",mapDirection:[1,"mapDirection"],directions:"directions",directionsText:"directionsText",pin:"pin",vanity:[1,"vanity"],mode:[1,"mode"]},decls:2,vars:2,consts:[["slot","start","name","information-circle-outline",3,"click"],["labelPlacement","start",3,"ionChange","ngModelChange","ngModel"],["lines","none"],["maxlength","4","type","number","placeholder","PIN",3,"ngModelChange","ionChange","ngModel"],["labelPlacement","stacked","label","Directions","placeholder","Describe how an attendee will get to the event",3,"ngModelChange","ionChange","spellcheck","rows","autoGrow","ngModel"],["title","Burn URL","description","Copy this link and use it on your website for registration of camps, art and events",3,"url"],["value","first"],["slot","header"],["slot","content"],["title","Camp Registration URL","description","Copy this link and use it on your website to allow people to register their camp.",3,"url","enabled"],["title","Event Registration URL","description","Copy this link and use it on your website to allow people to register an event in open camping or a described location (not a theme camp or art piece).",3,"url","enabled"],["title","Art Registration URL","description","Copy this link and use it on your website to allow people to register their art.",3,"url","enabled"],[3,"vanity"]],template:function(e,n){e&1&&(f(0,Mt,35,9,"ion-card"),f(1,Et,21,8,"ion-card")),e&2&&(v(n.mode()==="options"?0:-1),l(),v(n.mode()==="registration"?1:-1))},dependencies:[Me,Q,ae,at,A,W,ie,N,R,k,D,L,U,P,B,Ve,Ze,Ye,Fe],styles:[".url[_ngcontent-%COMP%]{color:var(--ion-color-dark)}ion-icon[_ngcontent-%COMP%]{cursor:pointer}"]});var Ie=de;var me=class me{constructor(){this.username=M("");this.server=M("");this.inboxEmail=M("");this.rssFeed=M("");this.primaryColor=M("");this.saved=q();this.saving=w(!1);this.alert=b(z)}save(){return y(this,null,function*(){if(this.username()==""&&this.server()==""&&this.inboxEmail()==""&&this.rssFeed()==""&&this.primaryColor()==""){this.saved.emit({mastodonHandle:"",inboxEmail:"",rssFeed:"",theme:null});return}if(this.username().length<2&&this.server().length>0){yield T(this.alert,"Your mastodon username must be specified");return}if(this.server().length<2&&this.username().length>0){yield T(this.alert,"The mastodon server must be specified");return}if(!this.server().includes(".")&&this.username().length>0){yield T(this.alert,"The mastodon server is not valid");return}if(!this.validUsername(this.username())&&this.server().length>0){yield T(this.alert,"The mastodon username is not valid");return}if(!this.validServername(this.server())&&this.username().length>0){yield T(this.alert,"The mastodon server is not valid");return}if(this.primaryColor()){let n=this.getColorValidationError(this.primaryColor());if(n){yield T(this.alert,n);return}}let t=this.username()==""?"":`@${this.username()}@${this.server()}`,e=this.primaryColor()?{primaryColor:this.primaryColor()}:null;this.saved.emit({mastodonHandle:t,inboxEmail:this.inboxEmail(),rssFeed:this.rssFeed(),theme:e}),this.saving.set(!0)})}validUsername(t){return/^[a-zA-Z0-9_]+$/.test(t)}validServername(t){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?)*$/.test(t)}getColorValidationError(t){let e=t.replace("#",""),n=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),O=(n*299+i*587+o*114)/1e3,Re=255*.15;return O>255-Re?"The chosen color is too close to white and will clash with light text.":O<Re?"The chosen color is too close to black and will clash with dark text.":null}reset(){this.username.set(""),this.server.set(""),this.inboxEmail.set(""),this.rssFeed.set(""),this.primaryColor.set("#f61067")}};me.\u0275fac=function(e){return new(e||me)},me.\u0275cmp=S({type:me,selectors:[["app-message-settings"]],inputs:{username:[1,"username"],server:[1,"server"],inboxEmail:[1,"inboxEmail"],rssFeed:[1,"rssFeed"],primaryColor:[1,"primaryColor"]},outputs:{username:"usernameChange",server:"serverChange",inboxEmail:"inboxEmailChange",rssFeed:"rssFeedChange",primaryColor:"primaryColorChange",saved:"saved"},decls:47,vars:6,consts:[[2,"width","100%"],["lines","none"],["label","Mastodon Username","labelPlacement","stacked","placeholder","Username","helperText","","maxlength","256",3,"ngModelChange","ngModel"],["label","Mastodon Server","labelPlacement","stacked","placeholder","E.g. mastondon.social","helperText","",3,"ngModelChange","ngModel"],["label","Email Address","labelPlacement","stacked","placeholder","","helperText","","maxlength","256",3,"ngModelChange","ngModel"],["label","RSS Feed","labelPlacement","stacked","placeholder","","helperText","","maxlength","512",3,"ngModelChange","ngModel"],["position","stacked"],["type","color",2,"width","100px","height","40px","border","none","cursor","pointer",3,"ngModelChange","ngModel"],[1,"row-center","ion-padding"],["size","small",3,"click","disabled"],["size","small",3,"click"]],template:function(e,n){e&1&&(a(0,"ion-card")(1,"ion-card-content")(2,"ion-card-header")(3,"ion-card-title",0),d(4," Mastodon "),r(),a(5,"ion-card-subtitle"),d(6," Posts to this mastodon account will be sent as notifications to all users in dust who have visited your regional. The top 20 posts of this account are shown in dust in the messages section. "),r()(),a(7,"ion-list")(8,"ion-item",1)(9,"ion-input",2),C("ngModelChange",function(o){return h(n.username,o)||(n.username=o),o}),r(),a(10,"p"),d(11,"@"),r(),a(12,"ion-input",3),C("ngModelChange",function(o){return h(n.server,o)||(n.server=o),o}),r()()()(),a(13,"ion-card-content")(14,"ion-card-header")(15,"ion-card-title"),d(16," Email "),r(),a(17,"ion-card-subtitle"),d(18,"Emails sent to inbox@dust.events from this email address will be sent as notifications to all users in dust who have visited your regional. The email will also show dust in the messages section."),r()(),a(19,"ion-list")(20,"ion-item",1)(21,"ion-input",4),C("ngModelChange",function(o){return h(n.inboxEmail,o)||(n.inboxEmail=o),o}),r()()()(),a(22,"ion-card-content")(23,"ion-card-header")(24,"ion-card-title"),d(25," RSS "),r(),a(26,"ion-card-subtitle"),d(27,"New articles in this RSS Feed will be sent as notifications to all users in dust who have visited your event. The article will also show dust in the messages section."),r()(),a(28,"ion-list")(29,"ion-item",1)(30,"ion-input",5),C("ngModelChange",function(o){return h(n.rssFeed,o)||(n.rssFeed=o),o}),r()()()(),a(31,"ion-card-content")(32,"ion-card-header")(33,"ion-card-title"),d(34," Theme "),r(),a(35,"ion-card-subtitle"),d(36,"Customize the theme for your event."),r()(),a(37,"ion-list")(38,"ion-item",1)(39,"ion-label",6),d(40,"Primary Color"),r(),a(41,"input",7),C("ngModelChange",function(o){return h(n.primaryColor,o)||(n.primaryColor=o),o}),r()()(),a(42,"div",8)(43,"ion-button",9),u("click",function(){return n.save()}),d(44,"Apply"),r(),a(45,"ion-button",10),u("click",function(){return n.reset()}),d(46,"Reset"),r()()()()),e&2&&(l(9),_("ngModel",n.username),l(3),_("ngModel",n.server),l(9),_("ngModel",n.inboxEmail),l(9),_("ngModel",n.rssFeed),l(11),_("ngModel",n.primaryColor),l(2),g("disabled",n.saving()))},dependencies:[E,k,Q,R,D,L,U,P,A,ze,W,ie,N,B,oe],styles:["ion-card-subtitle[_ngcontent-%COMP%]{text-wrap:wrap;width:100%}p[_ngcontent-%COMP%]{font-size:var(--fr3);padding-top:.75rem}"]});var Pe=me;var ce=class ce{constructor(){this.identifier=M("");this.domain=M("");this.uniqueId=M("");this.saving=w(!1);this.saved=q();this.alert=b(z)}save(){return y(this,null,function*(){if(K(this.identifier())&&K(this.domain())){this.saved.emit({identifier:"",domain:""});return}if(this.domain().length<2){yield T(this.alert,"The domain must be specified");return}let t=this.domain().replace(".volunteeripate.com","").replace("http://","").replace("https://","");if(t.includes(".")){yield T(this.alert,"The domain should not contain a period");return}this.saved.emit({identifier:this.identifier(),domain:t}),this.saving.set(!0)})}reset(){this.identifier.set(""),this.domain.set("")}};ce.\u0275fac=function(e){return new(e||ce)},ce.\u0275cmp=S({type:ce,selectors:[["app-volunteeripate-settings"]],inputs:{identifier:[1,"identifier"],domain:[1,"domain"],uniqueId:[1,"uniqueId"]},outputs:{identifier:"identifierChange",domain:"domainChange",uniqueId:"uniqueIdChange",saved:"saved"},decls:19,vars:3,consts:[["href","https://volunteeripate.com"],["lines","none"],["label","Subdomain","labelPlacement","stacked",3,"ngModelChange","placeholder","helperText","ngModel"],[1,"row-center","ion-padding"],["size","small",3,"click","disabled"],["size","small",3,"click"]],template:function(e,n){e&1&&(a(0,"ion-card")(1,"ion-card-content")(2,"ion-card-header")(3,"ion-card-title"),d(4," Volunteeripate "),r(),a(5,"ion-card-subtitle"),d(6,"Dust can show a volunteers shifts and remind them before the shift begins."),I(7,"br"),a(8,"a",0),d(9,"Volunteeripate"),r(),d(10," is a platform for volunteering and tickets. "),r()(),a(11,"ion-list")(12,"ion-item",1)(13,"ion-input",2),C("ngModelChange",function(o){return h(n.domain,o)||(n.domain=o),o}),r()()(),a(14,"div",3)(15,"ion-button",4),u("click",function(){return n.save()}),d(16,"Apply"),r(),a(17,"ion-button",5),u("click",function(){return n.reset()}),d(18,"Reset"),r()()()()),e&2&&(l(13),g("helperText","E.g. "+n.uniqueId()+".volunteeripate.com"),_("ngModel",n.domain),l(2),g("disabled",n.saving()))},dependencies:[E,k,Q,R,D,L,U,P,A,W,N,B],styles:["p[_ngcontent-%COMP%]{font-size:var(--fr3);padding-top:.75rem}"]});var De=ce;var pe=class pe{constructor(){this.campFormUrl=M("");this.artFormUrl=M("");this.mutantVehicleFormUrl=M("");this.saving=w(!1);this.saved=q();this.alert=b(z)}save(){return y(this,null,function*(){if(K(this.campFormUrl())&&K(this.artFormUrl())&&K(this.mutantVehicleFormUrl())){this.saved.emit({campsFormUrl:"",artFormUrl:"",mutantVehicleUrl:""});return}if(!Ee(this.campFormUrl(),!0)){yield T(this.alert,"The theme camp form URL is not valid");return}if(!Ee(this.artFormUrl(),!0)){yield T(this.alert,"The art form URL is not valid");return}if(!Ee(this.mutantVehicleFormUrl(),!0)){yield T(this.alert,"The mutant vehicle form URL is not valid");return}this.saved.emit({campsFormUrl:this.campFormUrl(),artFormUrl:this.artFormUrl(),mutantVehicleUrl:this.mutantVehicleFormUrl()}),this.saving.set(!0)})}reset(){this.campFormUrl.set(""),this.artFormUrl.set(""),this.mutantVehicleFormUrl.set("")}};pe.\u0275fac=function(e){return new(e||pe)},pe.\u0275cmp=S({type:pe,selectors:[["app-placement-settings"]],inputs:{campFormUrl:[1,"campFormUrl"],artFormUrl:[1,"artFormUrl"],mutantVehicleFormUrl:[1,"mutantVehicleFormUrl"]},outputs:{campFormUrl:"campFormUrlChange",artFormUrl:"artFormUrlChange",mutantVehicleFormUrl:"mutantVehicleFormUrlChange",saved:"saved"},decls:19,vars:4,consts:[["lines","none"],["label","Theme Camp Placement Form URL","labelPlacement","stacked","placeholder","","maxlength","2048",3,"ngModelChange","ngModel"],["label","Art Placement Form URL","labelPlacement","stacked","placeholder","","maxlength","2048",3,"ngModelChange","ngModel"],["label","Mutant Vehicle Placement Form URL","labelPlacement","stacked","placeholder","","maxlength","2048",3,"ngModelChange","ngModel"],[1,"row-center","ion-padding"],["size","small",3,"click","disabled"],["size","small",3,"click"]],template:function(e,n){e&1&&(a(0,"ion-card")(1,"ion-card-content")(2,"ion-card-header")(3,"ion-card-title"),d(4," Placement "),r(),a(5,"ion-card-subtitle"),d(6,"Dust will send an email after a camp, artist or mutant vehicle has registered. By specifying a link to a placement form they will also be encouraged to complete the form. "),r()(),a(7,"ion-list")(8,"ion-item",0)(9,"ion-input",1),C("ngModelChange",function(o){return h(n.campFormUrl,o)||(n.campFormUrl=o),o}),r()(),a(10,"ion-item",0)(11,"ion-input",2),C("ngModelChange",function(o){return h(n.artFormUrl,o)||(n.artFormUrl=o),o}),r()(),a(12,"ion-item",0)(13,"ion-input",3),C("ngModelChange",function(o){return h(n.mutantVehicleFormUrl,o)||(n.mutantVehicleFormUrl=o),o}),r()()(),a(14,"div",4)(15,"ion-button",5),u("click",function(){return n.save()}),d(16,"Apply"),r(),a(17,"ion-button",6),u("click",function(){return n.reset()}),d(18,"Reset"),r()()()()),e&2&&(l(9),_("ngModel",n.campFormUrl),l(2),_("ngModel",n.artFormUrl),l(2),_("ngModel",n.mutantVehicleFormUrl),l(2),g("disabled",n.saving()))},dependencies:[E,k,Q,R,D,L,U,P,A,W,ie,N,B],styles:["p[_ngcontent-%COMP%]{font-size:var(--fr3);padding-top:.75rem}ion-card-subtitle[_ngcontent-%COMP%]{text-wrap:wrap;width:100%}"]});var Ue=pe;function kt(s,t){if(s&1){let e=x();a(0,"ion-item")(1,"ion-input",26),C("ngModelChange",function(i){c(e);let o=m(2);return h(o.maxLines,i)||(o.maxLines=i),p(i)}),r()()}if(s&2){let e=m(2);l(),_("ngModel",e.maxLines)}}function Vt(s,t){if(s&1){let e=x();a(0,"ion-item")(1,"ion-input",27),C("ngModelChange",function(i){c(e);let o=m(2);return h(o.maxLength,i)||(o.maxLength=i),p(i)}),r()()}if(s&2){let e=m(2);l(),g("appHoverTooltip","The length of the answer"),_("ngModel",e.maxLength)}}function Ft(s,t){if(s&1){let e=x();a(0,"ion-item")(1,"ion-textarea",28),C("ngModelChange",function(i){c(e);let o=m(2);return h(o.optionsText,i)||(o.optionsText=i),p(i)}),r()()}if(s&2){let e=m(2);l(),_("ngModel",e.optionsText)}}function It(s,t){if(s&1){let e=x();a(0,"div",25)(1,"ion-button",29),u("click",function(){c(e);let i=m(2);return p(i.delete())}),d(2," Delete "),r(),a(3,"ion-button",3),u("click",function(){c(e);let i=m(2);return p(i.save())}),d(4," Save "),r()()}}function Pt(s,t){if(s&1){let e=x();a(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),u("click",function(){c(e);let i=m();return p(i.cancel())}),d(4,"Cancel"),r()(),a(5,"ion-title"),d(6),r(),a(7,"ion-buttons",4)(8,"ion-button",5),u("click",function(){c(e);let i=m();return p(i.save())}),d(9,"Save"),r()()()(),a(10,"ion-content",6)(11,"div",7)(12,"ion-card",8)(13,"ion-card-content",8)(14,"ion-list",9)(15,"ion-item")(16,"ion-input",10),C("ngModelChange",function(i){c(e);let o=m();return h(o.fieldName,i)||(o.fieldName=i),p(i)}),r()(),a(17,"ion-item")(18,"ion-textarea",11),C("ngModelChange",function(i){c(e);let o=m();return h(o.helperText,i)||(o.helperText=i),p(i)}),r()(),a(19,"div",12),d(20),r(),a(21,"ion-item",13)(22,"ion-select",14),C("ngModelChange",function(i){c(e);let o=m();return h(o.fieldType,i)||(o.fieldType=i),p(i)}),a(23,"ion-select-option",15),d(24,"Text"),r(),a(25,"ion-select-option",16),d(26,"Y/N"),r(),a(27,"ion-select-option",17),d(28,"Options"),r()()(),f(29,kt,2,1,"ion-item"),f(30,Vt,2,2,"ion-item"),f(31,Ft,2,1,"ion-item"),a(32,"ion-item",18)(33,"ion-checkbox",19),C("ngModelChange",function(i){c(e);let o=m();return h(o.required,i)||(o.required=i),p(i)}),d(34,"Required"),r()(),a(35,"ion-item",20)(36,"ion-select",21),C("ngModelChange",function(i){c(e);let o=m();return h(o.scope,i)||(o.scope=i),p(i)}),a(37,"ion-select-option",22),d(38,"User"),r(),a(39,"ion-select-option",23),d(40,"Admin Only"),r(),a(41,"ion-select-option",24),d(42,"Admin Can View"),r()()()(),f(43,It,5,0,"div",25),r()()()()}if(s&2){let e=m();l(6),ee(e.schemaType()==="camps"?"Theme Camp Question":"Art Question"),l(2),g("strong",!0),l(8),g("appHoverTooltip",e.schemaType()==="camps"?"Question to ask the theme camp":"Question to ask the artist"),_("ngModel",e.fieldName),l(2),_("ngModel",e.helperText),l(2),V(" ",e.helperText().length," / 500 characters "),l(),g("appHoverTooltip",e.getFieldTypeTooltip()),l(),_("ngModel",e.fieldType),l(7),v(e.fieldType()==="string"?29:-1),l(),v(e.fieldType()==="string"?30:-1),l(),v(e.fieldType()==="values"?31:-1),l(2),g("appHoverTooltip","Whether the question must be answered"),_("ngModel",e.required),l(3),g("appHoverTooltip",e.getScopeTooltip()),_("ngModel",e.scope),l(7),v(e.field()?43:-1)}}var ue=class ue{constructor(){this.modal=te.required(xe);this.isOpen=M(!1);this.field=w(null);this.schemaType=w("camps");this.saved=q();this.deleted=q();this.alert=b(z);this.fieldName=w("");this.fieldType=w("string");this.maxLines=w(1);this.maxLength=w(1e3);this.optionsText=w("");this.required=w(!1);this.scope=w("user");this.helperText=w("");qe(()=>{this.isOpen()&&this.initializeForm()})}initializeForm(){var e,n,i,o,O;let t=this.field();t?(this.fieldName.set(t.name),this.fieldType.set(t.type),this.maxLines.set((e=t.maxLines)!=null?e:1),this.maxLength.set((n=t.maxLength)!=null?n:1e3),this.optionsText.set((o=(i=t.values)==null?void 0:i.join(`
`))!=null?o:""),this.required.set(t.required),this.scope.set(t.scope),this.helperText.set((O=t.helperText)!=null?O:"")):(this.fieldName.set(""),this.fieldType.set("string"),this.maxLines.set(1),this.maxLength.set(1e3),this.optionsText.set(""),this.required.set(!1),this.scope.set("user"),this.helperText.set(""))}cancel(){this.modal().dismiss(null,"cancel")}save(){return y(this,null,function*(){let t=this.buildFieldDefinition();if(!t)return;let e=pt(t);if(e){yield T(this.alert,e,"Validation Error");return}this.saved.emit(t),this.modal().dismiss(t,"confirm")})}delete(){return y(this,null,function*(){(yield this.presentConfirm("Are you sure you want to delete this question?"))&&(this.deleted.emit(),this.modal().dismiss(null,"delete"))})}onWillDismiss(){this.isOpen.set(!1)}getFieldTypeTooltip(){switch(this.fieldType()){case"string":return"The question is answered by typing a text answer";case"boolean":return"The question is answered by checking a box";case"values":return"The question is answered by choosing an option";default:return""}}getScopeTooltip(){switch(this.scope()){case"user":return"User - the question will appear for the user and can be edited by them";case"admin":return"Admin Only - the question only appears for an administrator and not the camp/art owner";case"readadmin":return"Admin Can View - the question can be answered by the user but will not be able to see or edit it afterwards";default:return""}}buildFieldDefinition(){let t=this.fieldName().trim();if(!t)return T(this.alert,"Question cannot be empty","Validation Error"),null;let e=this.fieldType(),n=this.helperText().trim(),i={name:t,type:e,required:this.required(),scope:this.scope(),helperText:n===""?void 0:n};if(e==="string")i.maxLines=this.maxLines(),i.maxLength=this.maxLength();else if(e==="values"){let o=this.optionsText().split(`
`).map(O=>O.trim()).filter(O=>O!=="");if(o.length===0)return T(this.alert,"Options field must have at least one value","Validation Error"),null;i.values=o}return i}presentConfirm(t){return y(this,null,function*(){return new Promise(e=>y(this,null,function*(){yield(yield this.alert.create({header:"Confirm",message:t,buttons:[{text:"Delete",role:"delete",handler:()=>{e(!0)}},{text:"Cancel",role:"cancel",handler:()=>{e(!1)}}]})).present()}))})}};ue.\u0275fac=function(e){return new(e||ue)},ue.\u0275cmp=S({type:ue,selectors:[["app-custom-field-dialog"]],viewQuery:function(e,n){e&1&&X(n.modal,xe,5),e&2&&$()},inputs:{isOpen:[1,"isOpen"]},outputs:{isOpen:"isOpenChange",saved:"saved",deleted:"deleted"},decls:2,vars:2,consts:[[3,"willDismiss","isOpen","backdropDismiss"],["color","primary"],["slot","start"],[3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],[1,"border"],[1,"form"],["lines","none"],["label","Question *","labelPlacement","stacked","placeholder","Enter question","type","text",3,"ngModelChange","appHoverTooltip","ngModel"],["label","Helper Text","labelPlacement","stacked","appHoverTooltip","Guidance that appears as a tooltip for the question. Eg 'Provide a full leave no trace plan.'","placeholder","Optional guidance on how to fill out the answer to the question.","rows","3",3,"ngModelChange","ngModel"],[1,"helper-text-counter"],[1,"app-select",3,"appHoverTooltip"],["label","Type *","labelPlacement","stacked","interface","popover","placeholder","Select type",1,"app-select",3,"ngModelChange","ngModel"],["value","string"],["value","boolean"],["value","values"],[1,"ion-padding-start"],["justify","start","labelPlacement","end",3,"ngModelChange","appHoverTooltip","ngModel"],[1,"app-select"],["label","Scope *","labelPlacement","stacked","interface","popover","placeholder","Select scope",1,"app-select",3,"ngModelChange","appHoverTooltip","ngModel"],["value","user"],["value","admin"],["value","readadmin"],[1,"center"],["label","Rows of Text","labelPlacement","stacked","type","number","min","1","max","1000",3,"ngModelChange","ngModel"],["label","Maximum length of answer (characters)","labelPlacement","stacked","type","number","min","1","max","10000",3,"ngModelChange","appHoverTooltip","ngModel"],["label","Options (one per line) *","labelPlacement","stacked","placeholder",`Option 1
Option 2
Option 3`,"rows","5",3,"ngModelChange","ngModel"],["color","secondary",3,"click"]],template:function(e,n){e&1&&(a(0,"ion-modal",0),u("willDismiss",function(){return n.onWillDismiss()}),Ne(1,Pt,44,16,"ng-template"),r()),e&2&&g("isOpen",n.isOpen())("backdropDismiss",!1)},dependencies:[A,W,N,ut,we,E,xe,be,Se,ne,Te,R,k,Q,Me,ot,$e,it,P,D],styles:["ion-textarea[_ngcontent-%COMP%]{min-height:120px}.helper-text-counter[_ngcontent-%COMP%]{font-size:.75rem;color:var(--ion-color-medium);padding:.5rem 1rem;text-align:right}@media (min-width: 801px){ion-modal[_ngcontent-%COMP%]{--width: 80vw;--min-height: 80vh}}"]});var ge=ue;function Dt(s,t){s&1&&(a(0,"div",0),d(1," These are additional questions for theme camps that are kept private between you and the theme camp owner(s) "),r())}function Ut(s,t){s&1&&(a(0,"div",0),d(1," These are additional questions for artists that are kept private between you and the art owner(s) "),r())}function Lt(s,t){s&1&&(a(0,"div")(1,"p"),d(2,"Loading fields..."),r()())}function Rt(s,t){if(s&1){let e=x();a(0,"ion-item",5),u("click",function(){let i=c(e).$implicit,o=m(3);return p(o.openEditDialog(i))}),a(1,"ion-label"),d(2),r()()}if(s&2){let e=t.$implicit;l(2),V(" ",e.name," ")}}function Wt(s,t){if(s&1&&(a(0,"ion-list"),ve(1,Rt,3,1,"ion-item",4,Ae),r()),s&2){let e=m(2);l(),ye(e.schema())}}function Nt(s,t){if(s&1&&(a(0,"div")(1,"p"),d(2),r()()),s&2){let e=m(2);l(2),V("You can ask for additional information when someone registers their ",e.schemaType()==="camps"?"Theme Camp":"Art"," by adding fields.")}}function At(s,t){if(s&1){let e=x();a(0,"div"),f(1,Wt,3,0,"ion-list"),f(2,Nt,3,1,"div"),a(3,"div",2)(4,"ion-button",3),u("click",function(){c(e);let i=m();return p(i.openAddDialog())}),d(5," Add Question "),r()()()}if(s&2){let e=m();l(),v(e.schema().length>0?1:-1),l(),v(e.schema().length===0?2:-1)}}var _e=class _e{constructor(){this.schemaType=F.required();this.schemaChanged=q();this.dialog=te(ge);this.api=b(H);this.alert=b(tt);this.schema=w([]);this.isLoading=w(!1);this.dialogOpen=w(!1);this.editingField=w(null);re({add:lt,trash:mt,pencil:dt})}ngOnInit(){this.loadSchema()}loadSchema(){return y(this,null,function*(){this.isLoading.set(!0);try{let t=this.schemaType()==="camps"?yield this.api.getCampSchema():yield this.api.getArtSchema();t.data&&Array.isArray(t.data)?this.schema.set(t.data):this.schema.set([])}catch(t){console.error("Failed to load schema:",t),this.schema.set([])}finally{this.isLoading.set(!1)}})}openAddDialog(){let t=this.dialog();t&&(t.field.set(null),t.schemaType.set(this.schemaType())),this.editingField.set(null),this.dialogOpen.set(!0)}openEditDialog(t){let e=this.dialog();e&&(e.field.set(t),e.schemaType.set(this.schemaType())),this.editingField.set(t),this.dialogOpen.set(!0)}onFieldSaved(t){return y(this,null,function*(){let e=this.schema(),n=this.editingField(),i;n?i=e.map(o=>o.name===n.name?t:o):i=[...e,t],this.schema.set(i),this.dialogOpen.set(!1),this.editingField.set(null),yield this.saveSchema(i)})}onFieldDeleted(){return y(this,null,function*(){let t=this.editingField();if(!t)return;let e=this.schema().filter(n=>n.name!==t.name);this.schema.set(e),this.dialogOpen.set(!1),this.editingField.set(null),yield this.saveSchema(e)})}deleteField(t){return y(this,null,function*(){if(yield this.presentConfirm(`Are you sure you want to delete the field "${t.name}"?`)){let n=this.schema().filter(i=>i.name!==t.name);this.schema.set(n),yield this.saveSchema(n)}})}saveSchema(t){return y(this,null,function*(){try{let e=this.schemaType()==="camps"?yield this.api.saveCampSchema(t):yield this.api.saveArtSchema(t);e.message&&e.message.includes("error")?yield T(this.alert,e.message,"Error"):this.schemaChanged.emit(t)}catch(e){console.error("Failed to save schema:",e),yield T(this.alert,`Failed to save schema: ${e}`,"Error")}})}presentConfirm(t){return y(this,null,function*(){return new Promise(e=>y(this,null,function*(){yield(yield this.alert.create({header:"Confirm",message:t,buttons:[{text:"Delete",role:"delete",handler:()=>{e(!0)}},{text:"Cancel",role:"cancel",handler:()=>{e(!1)}}]})).present()}))})}getFieldTypeLabel(t){switch(t){case"string":return"Text";case"boolean":return"Y/N";case"values":return"Options";default:return t}}getScopeLabel(t){switch(t){case"user":return"User";case"admin":return"Admin Only";case"readadmin":return"Admin Can View";default:return t}}};_e.\u0275fac=function(e){return new(e||_e)},_e.\u0275cmp=S({type:_e,selectors:[["app-custom-fields-editor"]],viewQuery:function(e,n){e&1&&X(n.dialog,ge,5),e&2&&$()},inputs:{schemaType:[1,"schemaType"]},outputs:{schemaChanged:"schemaChanged"},decls:10,vars:6,consts:[[1,"subtitle-text"],[3,"isOpenChange","saved","deleted","isOpen"],[1,"row-center","ion-padding"],["size","small","color","primary",3,"click"],["button",""],["button","",3,"click"]],template:function(e,n){e&1&&(a(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),d(3),r(),f(4,Dt,2,0,"div",0),f(5,Ut,2,0,"div",0),r(),a(6,"ion-card-content"),f(7,Lt,3,0,"div"),f(8,At,6,2,"div"),r()(),a(9,"app-custom-field-dialog",1),C("isOpenChange",function(o){return h(n.dialogOpen,o)||(n.dialogOpen=o),o}),u("saved",function(o){return n.onFieldSaved(o)})("deleted",function(){return n.onFieldDeleted()}),r()),e&2&&(l(3),V(" ",n.schemaType()==="camps"?"Theme Camp Questions":"Art Questions"," "),l(),v(n.schemaType()==="camps"?4:-1),l(),v(n.schemaType()==="art"?5:-1),l(2),v(n.isLoading()?7:-1),l(),v(n.isLoading()?-1:8),l(),_("isOpen",n.dialogOpen))},dependencies:[E,R,k,oe,P,D,U,L,ge],styles:["ion-card[_ngcontent-%COMP%]{margin:16px 0}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0}ion-button[_ngcontent-%COMP%]{margin:0 4px}p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--ion-color-medium)}span[_ngcontent-%COMP%]{margin-left:8px}.subtitle-text[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--ion-color-medium);white-space:normal;word-wrap:break-word;overflow-wrap:break-word;line-height:1.4;margin-top:.5rem}"]});var Le=_e;var Ot=()=>["Live Music","Bipoc","Wheelchair Accessible"],qt=(s,t)=>t.id;function Bt(s,t){if(s&1&&(a(0,"ion-segment-button",4)(1,"ion-label"),d(2),r()()),s&2){let e=t.$implicit;g("value",e.id),l(2),ee(e.label)}}function Qt(s,t){if(s&1&&I(0,"app-camp-registration",8),s&2){let e=m(2);g("enabled",e.festival.camp_registration)("eventRegistration",e.festival.event_registration)("musicRegistration",e.festival.music_registration)("eventEditing",e.festival.event_editing)("campEditing",e.festival.camp_editing)("artEditing",e.festival.art_editing)("mapDirection",e.festival.map_direction)("pin",e.festival.pin)("directionsText",e.festival.directions)("directions",e.festival.directions!==null)("requirePin",e.festival.pin!==null)("vanity",e.festival.vanity)}}function Ht(s,t){if(s&1&&I(0,"app-camp-registration",9),s&2){let e=m(2);g("enabled",e.festival.camp_registration)("eventRegistration",e.festival.event_registration)("musicRegistration",e.festival.music_registration)("eventEditing",e.festival.event_editing)("campEditing",e.festival.camp_editing)("artEditing",e.festival.art_editing)("mapDirection",e.festival.map_direction)("pin",e.festival.pin)("directionsText",e.festival.directions)("directions",e.festival.directions!==null)("requirePin",e.festival.pin!==null)("vanity",e.festival.vanity)}}function zt(s,t){var e;if(s&1){let n=x();a(0,"app-message-settings",15),u("saved",function(o){c(n);let O=m(2);return p(O.saveMessageSettings(o))}),r()}if(s&2){let n=m(2);g("server",n.mastodonServer(n.festival.mastodon_handle))("username",n.mastodonUsername(n.festival.mastodon_handle))("inboxEmail",n.festival.inbox_email)("rssFeed",n.festival.rss_feed)("primaryColor",(e=n.festival.theme==null?null:n.festival.theme.primaryColor)!=null?e:"#f61067")}}function jt(s,t){if(s&1){let e=x();a(0,"app-placement-settings",16),u("saved",function(i){c(e);let o=m(2);return p(o.savePlacementSettings(i))}),r()}if(s&2){let e=m(2);g("campFormUrl",e.festival.placement_form_camps)("artFormUrl",e.festival.placement_form_art)("mutantVehicleFormUrl",e.festival.placement_form_cars)}}function Zt(s,t){if(s&1){let e=x();a(0,"app-volunteeripate-settings",17),u("saved",function(i){c(e);let o=m(2);return p(o.saveVoluneeripateSettings(i))}),r()}if(s&2){let e=m(2);g("identifier",e.festival.volunteeripate_identifier)("domain",e.festival.volunteeripate_domain)("uniqueId",e.festival.vanity)}}function Yt(s,t){if(s&1){let e=x();a(0,"app-event-types",18),u("eventTypesChange",function(i){c(e);let o=m(2);return p(o.saveEventTypes(i))}),r()}if(s&2){let e=m(2);g("maxTypes",e.festival.max_event_types)("eventTypes",e.festival.event_types)}}function Gt(s,t){if(s&1){let e=x();a(0,"app-event-types",19),u("eventTypesChange",function(i){c(e);let o=m(2);return p(o.saveMusicTypes(i))}),r()}if(s&2){let e=m(2);g("defaultTypes",Oe(3,Ot))("maxTypes",e.festival.max_music_types)("eventTypes",e.festival.music_types)}}function Jt(s,t){s&1&&I(0,"app-custom-fields-editor",20)(1,"br")(2,"app-custom-fields-editor",20),s&2&&(g("schemaType","camps"),l(2),g("schemaType","art"))}function Kt(s,t){if(s&1&&d(0),s&2){let e=m(3);V(" Delete ",e.festival.name," ")}}function Xt(s,t){s&1&&d(0," Delete ")}function $t(s,t){if(s&1){let e=x();a(0,"ion-row",21)(1,"ion-col")(2,"ion-text"),d(3),r()(),a(4,"ion-col",22)(5,"ion-button",23),u("click",function(){c(e);let i=m(3);return p(i.clearEvents())}),d(6,"Delete Events"),r()()()}if(s&2){let e=m(3);l(3),V("Delete all events at ",e.festival.name,"? This cannot be undone.")}}function ei(s,t){if(s&1&&d(0),s&2){let e=m(3);V(" Delete ",e.festival.name,"? This cannot be undone. ")}}function ti(s,t){if(s&1&&d(0),s&2){let e=m(3);V(" Delete all camps, events and art at ",e.festival.name,"? This cannot be undone. ")}}function ii(s,t){if(s&1){let e=x();a(0,"ion-card",0)(1,"ion-card-content")(2,"ion-card-header")(3,"ion-card-title"),f(4,Kt,1,1)(5,Xt,1,0),r()(),a(6,"ion-grid"),f(7,$t,7,1,"ion-row",21),a(8,"ion-row",21)(9,"ion-col")(10,"ion-text"),f(11,ei,1,1)(12,ti,1,1),r()(),a(13,"ion-col",22)(14,"ion-button",23),u("click",function(){c(e);let i=m(2);return p(i.deleteBurn())}),d(15,"Delete All"),r()()()()()()}if(s&2){let e=m(2);l(4),v(e.canDeleteBurn?4:5),l(3),v(e.canDeleteBurn?-1:7),l(4),v(e.canDeleteBurn?11:12)}}function ni(s,t){if(s&1&&(a(0,"div",7),f(1,Qt,1,12,"app-camp-registration",8),f(2,Ht,1,12,"app-camp-registration",9),f(3,zt,1,5,"app-message-settings",10),f(4,jt,1,3,"app-placement-settings",11),f(5,Zt,1,3,"app-volunteeripate-settings",12),f(6,Yt,1,2,"app-event-types",13),f(7,Gt,1,4,"app-event-types",14),f(8,Jt,3,2),f(9,ii,16,3,"ion-card",0),r()),s&2){let e=m();l(),v(e.activeSection()==="options"?1:-1),l(),v(e.activeSection()==="registration"?2:-1),l(),v(e.activeSection()==="settings"?3:-1),l(),v(e.activeSection()==="placement"?4:-1),l(),v(e.activeSection()==="volunteeripate"?5:-1),l(),v(e.activeSection()==="eventTypes"?6:-1),l(),v(e.activeSection()==="musicTypes"?7:-1),l(),v(e.activeSection()==="questions"?8:-1),l(),v(e.activeSection()==="delete"?9:-1)}}var he=class he{constructor(){this.vanity=F();this.api=b(H);this.location=b(Be);this.alert=b(z);this.canDeleteBurn=!1;this.router=b(Qe);this.activeSection=w("options");this.sections=[{id:"options",label:"Options"},{id:"registration",label:"Registration"},{id:"settings",label:"Settings"},{id:"placement",label:"Placement"},{id:"volunteeripate",label:"Volunteeripate"},{id:"eventTypes",label:"Event Types"},{id:"musicTypes",label:"Music Types"},{id:"questions",label:"Questions"},{id:"delete",label:"Delete"}]}ngOnInit(){return y(this,null,function*(){var e,n;let t=this.vanity();t&&(this.festival=yield this.api.getFestivalByVanity(t,!0,!1),this.festival&&!((e=this.festival)!=null&&e.max_event_types)&&(this.festival.max_event_types=2),this.festival&&!((n=this.festival)!=null&&n.max_music_types)&&(this.festival.max_music_types=2))})}saveEventTypes(t){return y(this,null,function*(){this.festival&&(this.festival.event_types=t.eventTypes,this.festival.max_event_types=t.maxTypes,yield this.api.setEventTypes(this.festival),this.location.back())})}saveMusicTypes(t){return y(this,null,function*(){this.festival&&(this.festival.music_types=t.eventTypes,this.festival.max_music_types=t.maxTypes,yield this.api.setMusicTypes(this.festival),this.location.back())})}saveVoluneeripateSettings(t){return y(this,null,function*(){this.festival&&(yield this.api.setVolunteeripateSettings(this.festival.vanity,t),this.location.back())})}savePlacementSettings(t){return y(this,null,function*(){this.festival&&(yield this.api.setPlacementSettings(this.festival.vanity,t),this.location.back())})}saveMessageSettings(t){return y(this,null,function*(){this.festival&&(yield this.api.setMessageSettings({mastodon_handle:t.mastodonHandle,inbox_email:t.inboxEmail,festival_vanity:this.festival.vanity,rss_feed:t.rssFeed,theme:t.theme}),this.location.back())})}deleteBurn(){return y(this,null,function*(){(yield this.clearData(this.canDeleteBurn))&&(this.canDeleteBurn=!0)})}clearData(t){return y(this,null,function*(){var e,n;return this.api.isAdmin(this.api.festivalId)?!(yield Ce(this.alert,t?`Are you sure you want to delete ${(e=this.festival)==null?void 0:e.name}?`:"Are you sure you want to delete all camps, art and events?","Delete"))||!(yield Ce(this.alert,t?`Are you super sure you want to DELETE ${(n=this.festival)==null?void 0:n.name.toUpperCase()}?`:"Are you super sure you want to DELETE ALL CAMPS, ARTS & EVENTS?","Yes"))?!1:(yield this.api.clearData(t),t||this.api.sendMessage('All camps, art and events have been deleted. Be sure to click "Publish" to apply the changes to the app.'),this.api.clearCache(),t&&(this.api.signOut(),this.router.navigateByUrl("/auth")),!0):(this.api.sendMessage("This feature is not available to you."),!1)})}mastodonUsername(t){return rt(t)}mastodonServer(t){return st(t)}clearEvents(){return y(this,null,function*(){if(!this.api.isAdmin(this.api.festivalId))this.api.sendMessage("This feature is not available to you.");else{if(!(yield Ce(this.alert,"Are you sure you want to delete all events?","Delete"))||!(yield Ce(this.alert,"Are you super sure you want DELETE events?","Yes")))return;yield this.api.clearEvents(),this.api.sendMessage('All events have been deleted. Be sure to click "Publish" to apply the changes to the app.'),this.api.clearCache()}})}};he.\u0275fac=function(e){return new(e||he)},he.\u0275cmp=S({type:he,selectors:[["app-settings"]],inputs:{vanity:[1,"vanity"]},decls:13,vars:4,consts:[["color","primary"],["slot","start"],["routerLink","../"],["mode","md",1,"ion-margin-bottom",3,"ngModelChange","scrollable","ngModel"],[3,"value"],[3,"fullscreen"],[1,"border"],[1,"pad-below","ion-padding-top"],["mode","options",3,"enabled","eventRegistration","musicRegistration","eventEditing","campEditing","artEditing","mapDirection","pin","directionsText","directions","requirePin","vanity"],["mode","registration",3,"enabled","eventRegistration","musicRegistration","eventEditing","campEditing","artEditing","mapDirection","pin","directionsText","directions","requirePin","vanity"],[3,"server","username","inboxEmail","rssFeed","primaryColor"],[3,"campFormUrl","artFormUrl","mutantVehicleFormUrl"],[3,"identifier","domain","uniqueId"],[3,"maxTypes","eventTypes"],["typeTitle","Music Types",3,"defaultTypes","maxTypes","eventTypes"],[3,"saved","server","username","inboxEmail","rssFeed","primaryColor"],[3,"saved","campFormUrl","artFormUrl","mutantVehicleFormUrl"],[3,"saved","identifier","domain","uniqueId"],[3,"eventTypesChange","maxTypes","eventTypes"],["typeTitle","Music Types",3,"eventTypesChange","defaultTypes","maxTypes","eventTypes"],[3,"schemaType"],[1,"ion-align-items-center"],["size","auto",1,"ion-justify-content-end"],["color","dark",3,"click"]],template:function(e,n){e&1&&(a(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),I(3,"ion-back-button"),r(),a(4,"ion-title",2),d(5,"Settings"),r()(),a(6,"ion-toolbar",0)(7,"ion-segment",3),C("ngModelChange",function(o){return h(n.activeSection,o)||(n.activeSection=o),o}),ve(8,Bt,3,2,"ion-segment-button",4,qt),r()()(),a(10,"ion-content",5)(11,"div",6),f(12,ni,10,9,"div",7),r()()),e&2&&(l(7),g("scrollable",!0),_("ngModel",n.activeSection),l(),ye(n.sections),l(2),g("fullscreen",!0),l(2),v(n.festival?12:-1))},dependencies:[oe,Xe,nt,Ke,Ge,Je,U,P,E,L,D,je,ne,we,be,Te,Se,A,W,N,et,Ie,ct,Pe,Ue,De,Le],encapsulation:2});var _t=he;export{_t as SettingsPage};
