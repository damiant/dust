import{c as He}from"./chunk-BPJKYUB7.js";import{a as j}from"./chunk-MTPZGFQA.js";import{a as se,c as S}from"./chunk-OZ2IKH4J.js";import"./chunk-NBGQYW5Y.js";import"./chunk-HTUMMCB5.js";import"./chunk-I4H34LCA.js";import"./chunk-GDAPN2EF.js";import"./chunk-HC6MZPB3.js";import"./chunk-YMI2B6JE.js";import"./chunk-STA5XHHU.js";import"./chunk-NPRM7GGH.js";import"./chunk-SFJBRZ2Y.js";import"./chunk-I5V6RRU4.js";import"./chunk-2EOHHFOF.js";import"./chunk-JXIEZMHN.js";import"./chunk-3QBWF6TQ.js";import"./chunk-MCRJI3T3.js";import"./chunk-GTAO53MO.js";import"./chunk-JEOCIQEZ.js";import"./chunk-MM5QLNJM.js";import"./chunk-3573TPBU.js";import{G as ce,Z as pe}from"./chunk-2G3SQA7K.js";import{D as de,H,e as Z,i as ze,k as Qe}from"./chunk-5TGYAYRP.js";import"./chunk-XMQYHBKU.js";import{$ as d,$a as xe,Aa as v,D as ye,Dc as Ne,Ea as Te,Ec as Oe,G as l,I as le,Ka as Y,L as y,La as D,Lb as Pe,Ma as Ee,Na as b,Ob as Ue,Pb as Re,Qa as Me,Sb as T,Tb as me,Ub as R,V as x,Va as ke,Vb as F,W as I,Wb as E,Xb as V,Yb as M,Zb as Fe,_b as Ve,aa as o,ab as Ie,ba as a,ca as f,dc as Le,ea as P,ec as We,fa as m,fc as k,ga as p,hc as L,ib as O,ka as B,kc as Ae,la as q,lb as z,ma as N,na as be,oa as we,oc as De,p as w,pc as Be,qb as J,qc as qe,s as u,sb as U,t as g,ta as s,ua as Se,va as A,w as G,wc as K,xc as Q,ya as h,za as _}from"./chunk-LVKFIXIJ.js";import"./chunk-JORYF43P.js";import"./chunk-7KGURMOZ.js";import"./chunk-R7LHOHUY.js";import"./chunk-HUOLUIW7.js";import"./chunk-CCK7OWI7.js";import"./chunk-LIBYTRNP.js";import"./chunk-3MK77LPM.js";import"./chunk-4U6PRYVA.js";import"./chunk-CZ4AHVKD.js";import"./chunk-Z4V4M3ZT.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{h as C}from"./chunk-LNJ3S2LQ.js";var Ye=["link"],Je=["link2"],Ke=["link3"],X=class X{constructor(t){this.api=t;this.campsUrl="";this.eventsUrl="";this.artUrl="";this.vanity=D("")}ngOnInit(){this.campsUrl=`https://${this.vanity()}.dust.events/camps/`,this.eventsUrl=`https://${this.vanity()}.dust.events/events/`,this.artUrl=`https://${this.vanity()}.dust.events/art/`}message(t,i){this.api.sendMessage(i,0,t)}copyCampsUrl(){let t=this.link.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}copyArtUrl(){let t=this.link3.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}copyEventsUrl(){let t=this.link2.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}};X.\u0275fac=function(i){return new(i||X)(le(H))},X.\u0275cmp=y({type:X,selectors:[["app-web-links"]],viewQuery:function(i,e){if(i&1&&(B(Ye,5),B(Je,5),B(Ke,5)),i&2){let r;q(r=N())&&(e.link=r.first),q(r=N())&&(e.link2=r.first),q(r=N())&&(e.link3=r.first)}},inputs:{vanity:[1,"vanity"]},decls:30,vars:9,consts:[["link",""],["link2",""],["link3",""],[2,"width","100%"],["color","primary","routerLink","./css",2,"margin-left","auto"],["lines","none"],["slot","start","name","information-circle-outline",3,"click"],["fill","solid","slot","end","color","primary","id","open-toast",3,"click"],["fill","solid","color","primary","id","open-toast","slot","end",3,"click"],["slot","end","fill","solid","color","primary","id","open-toast",3,"click"],["type","text",3,"hidden","value"]],template:function(i,e){if(i&1){let r=P();o(0,"ion-card-header")(1,"ion-card-title",3)(2,"ion-buttons"),s(3," Lists "),o(4,"ion-button",4),s(5,"CSS"),a()()(),o(6,"ion-card-subtitle"),s(7," These can be used on your website to display a live list of camps, events and art. "),a()(),o(8,"ion-list",5)(9,"ion-item")(10,"ion-icon",6),m("click",function(){return u(r),g(e.message("Theme Camps Web Page","This link for a web page of all theme camp can be used on your website."))}),a(),s(11),o(12,"ion-button",7),m("click",function(){return u(r),g(e.copyCampsUrl())}),s(13,"Copy"),a()(),o(14,"ion-item")(15,"ion-icon",6),m("click",function(){return u(r),g(e.message("Events Web Page","This link for a web page of all events can be used on your website."))}),a(),s(16),o(17,"ion-button",8),m("click",function(){return u(r),g(e.copyEventsUrl())}),s(18,"Copy"),a()(),o(19,"ion-item")(20,"ion-icon",6),m("click",function(){return u(r),g(e.message("Art Web Page","This link for a web page of art can be used on your website."))}),a(),s(21),o(22,"ion-button",9),m("click",function(){return u(r),g(e.copyArtUrl())}),s(23,"Copy"),a()()(),f(24,"input",10,0)(26,"input",10,1)(28,"input",10,2)}i&2&&(l(11),A(" ",e.campsUrl," "),l(5),A(" ",e.eventsUrl," "),l(5),A(" ",e.artUrl," "),l(3),d("hidden",!0)("value",e.campsUrl),l(2),d("hidden",!0)("value",e.eventsUrl),l(2),d("hidden",!0)("value",e.artUrl))},dependencies:[me,T,L,K,M,E,V,k,Ie],styles:["ion-card-title[_ngcontent-%COMP%]{font-size:var(--fr3)!important}ion-icon[_ngcontent-%COMP%]{cursor:pointer}"]});var ue=X;var Xe=["link"];function $e(c,t){if(c&1){let i=P();o(0,"ion-item",1)(1,"ion-icon",2),m("click",function(){u(i);let r=p();return g(r.message(r.title(),r.description()))}),a(),o(2,"a",3),s(3),a(),o(4,"ion-button",4),m("click",function(){u(i);let r=p();return g(r.copy())}),s(5,"Copy"),a()(),f(6,"input",5,0)}if(c&2){let i=p();l(2),d("href",i.url(),ye),l(),Se(i.url()),l(3),d("hidden",!0)("value",i.url())}}var te=class te{constructor(){this.url=D();this.enabled=D(!0);this.title=D("");this.description=D("");this.link=Ee("link");this.api=w(H);pe({informationCircleOutline:ce})}message(t,i){this.api.sendMessage(i,0,t)}copy(){let t=this.link().nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}};te.\u0275fac=function(i){return new(i||te)},te.\u0275cmp=y({type:te,selectors:[["app-url-link"]],viewQuery:function(i,e){i&1&&be(e.link,Xe,5),i&2&&we()},inputs:{url:[1,"url"],enabled:[1,"enabled"],title:[1,"title"],description:[1,"description"]},decls:1,vars:1,consts:[["link",""],[1,"url"],["slot","start","name","information-circle-outline",3,"click"],["target","_blank",3,"href"],["id","open-toast","slot","end",3,"click"],["type","text",3,"hidden","value"]],template:function(i,e){i&1&&x(0,$e,8,4),i&2&&I(e.enabled()?0:-1)},dependencies:[k,K,T],styles:[".url[_ngcontent-%COMP%]{color:var(--ion-color-dark)}ion-icon[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--ion-text-color)}"]});var ge=te;var et=["link"],tt=["artLink"],it=["eventLink"];function nt(c,t){if(c&1){let i=P();o(0,"ion-item",2)(1,"ion-input",11),v("ngModelChange",function(r){u(i);let n=p();return _(n.pin,r)||(n.pin=r),g(r)}),m("ionChange",function(){u(i);let r=p();return g(r.changed())}),a()()}if(c&2){let i=p();l(),h("ngModel",i.pin)}}function ot(c,t){if(c&1){let i=P();o(0,"ion-item",2)(1,"ion-textarea",12),v("ngModelChange",function(r){u(i);let n=p();return _(n.directionsText,r)||(n.directionsText=r),g(r)}),m("ionChange",function(){u(i);let r=p();return g(r.changed())}),a()()}if(c&2){let i=p();l(),d("spellcheck",!0)("rows",6)("autoGrow",!0),h("ngModel",i.directionsText)}}var ie=class ie{constructor(t){this.api=t;this.toastButtons=[{text:"Dismiss",role:"cancel"}];this.url="";this.burnUrl="";this.artUrl="";this.eventUrl="";this.directionsText=void 0;this.vanity=D("");pe({informationCircleOutline:ce})}ngOnInit(){let t=this.api.vanity();this.burnUrl=`https://${t}.dust.events`,this.url=`${document.location.protocol}//${document.location.host}/${t}/camps`,this.artUrl=`${document.location.protocol}//${document.location.host}/${t}/art`,this.eventUrl=`${document.location.protocol}//${document.location.host}/${t}/events`}copy(){let t=this.link.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}copyArt(){let t=this.artLink.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}copyEventUrl(){let t=this.eventLink.nativeElement;t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),this.api.sendMessage(`Copied ${t.value} to the clipboard`,1)}changed(t,i){t=="camp"&&i.detail.checked&&(this.campEditing=!0,this.artEditing=!0,this.eventEditing=!0),this.requirePin||(this.pin=void 0),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.api.festivalId&&(this.pin>9999&&(this.pin=9999),this.api.updateFestivalSettings({id:this.api.festivalId,camp_registration:this.enabled,event_registration:this.eventRegistration,music_registration:this.musicRegistration,event_editing:this.eventEditing,camp_editing:this.campEditing,art_editing:this.artEditing,map_direction:this.mapDirection,directions:this.directions?this.directionsText:void 0,pin:this.requirePin?this.pin:void 0}))},3e3)}message(t,i){this.api.sendMessage(i,0,t)}};ie.\u0275fac=function(i){return new(i||ie)(le(H))},ie.\u0275cmp=y({type:ie,selectors:[["app-camp-registration"]],viewQuery:function(i,e){if(i&1&&(B(et,5),B(tt,5),B(it,5)),i&2){let r;q(r=N())&&(e.link=r.first),q(r=N())&&(e.artLink=r.first),q(r=N())&&(e.eventLink=r.first)}},inputs:{enabled:"enabled",eventRegistration:"eventRegistration",musicRegistration:"musicRegistration",eventEditing:"eventEditing",campEditing:"campEditing",artEditing:"artEditing",requirePin:"requirePin",mapDirection:"mapDirection",directions:"directions",directionsText:"directionsText",pin:"pin",vanity:[1,"vanity"]},decls:57,vars:17,consts:[["slot","start","name","information-circle-outline",3,"click"],["labelPlacement","start",3,"ionChange","ngModelChange","ngModel"],["lines","none"],["title","Burn URL","description","Copy this link and use it on your website for registration of camps, art and events",3,"url"],["value","first"],["slot","header"],["slot","content"],["title","Camp Registration URL","description","Copy this link and use it on your website to allow people to register their camp.",3,"url","enabled"],["title","Event Registration URL","description","Copy this link and use it on your website to allow people to register an event in open camping or a described location (not a theme camp or art piece).",3,"url","enabled"],["title","Art Registration URL","description","Copy this link and use it on your website to allow people to register their art.",3,"url","enabled"],[3,"vanity"],["maxlength","4","type","number","placeholder","PIN",3,"ngModelChange","ionChange","ngModel"],["labelPlacement","stacked","label","Directions","placeholder","Describe how an attendee will get to the event",3,"ngModelChange","ionChange","spellcheck","rows","autoGrow","ngModel"]],template:function(i,e){i&1&&(o(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),s(3," Options "),a()(),o(4,"ion-card-content")(5,"ion-item")(6,"ion-icon",0),m("click",function(){return e.message("Camp/Art Registration","Enable if you allow new camps to be registered. Disable you are not accepting camp registration yet.")}),a(),o(7,"ion-toggle",1),m("ionChange",function(n){return e.changed("camp",n)}),v("ngModelChange",function(n){return _(e.enabled,n)||(e.enabled=n),n}),s(8,"Allow Camp/Art Registration"),a()(),o(9,"ion-item")(10,"ion-icon",0),m("click",function(){return e.message("Event Registration","Choose whether event registration is allowed by users who are not theme camp leads or artists.")}),a(),o(11,"ion-toggle",1),m("ionChange",function(){return e.changed()}),v("ngModelChange",function(n){return _(e.eventRegistration,n)||(e.eventRegistration=n),n}),s(12,"Allow Event Registration by the public"),a()(),o(13,"ion-item")(14,"ion-icon",0),m("click",function(){return e.message("Event Editing","Allows events or music to be edited. ")}),a(),o(15,"ion-toggle",1),m("ionChange",function(){return e.changed()}),v("ngModelChange",function(n){return _(e.eventEditing,n)||(e.eventEditing=n),n}),s(16,"Allow Event/Music Editing"),a()(),o(17,"ion-item")(18,"ion-icon",0),m("click",function(){return e.message("Music Registration","Allow music to be registered at camps, art and mutant vehicles.")}),a(),o(19,"ion-toggle",1),m("ionChange",function(){return e.changed()}),v("ngModelChange",function(n){return _(e.musicRegistration,n)||(e.musicRegistration=n),n}),s(20,"Allow Music Registration"),a()(),o(21,"ion-item")(22,"ion-icon",0),m("click",function(){return e.message("Art Editing","Allows art owners that have already registered to edit their art details.")}),a(),o(23,"ion-toggle",1),m("ionChange",function(){return e.changed()}),v("ngModelChange",function(n){return _(e.artEditing,n)||(e.artEditing=n),n}),s(24,"Allow Art Editing"),a()(),o(25,"ion-item")(26,"ion-icon",0),m("click",function(){return e.message("Require PIN","Whether to require a PIN to be entered to access the event.")}),a(),o(27,"ion-toggle",1),m("ionChange",function(){return e.changed()}),v("ngModelChange",function(n){return _(e.requirePin,n)||(e.requirePin=n),n}),s(28,"Require PIN"),a()(),x(29,nt,2,1,"ion-item",2),o(30,"ion-item")(31,"ion-icon",0),m("click",function(){return e.message("Directions","Whether to show text when the directions button is clicked.")}),a(),o(32,"ion-toggle",1),m("ionChange",function(){return e.changed()}),v("ngModelChange",function(n){return _(e.directions,n)||(e.directions=n),n}),s(33,"Text Based Directions"),a()(),x(34,ot,2,4,"ion-item",2),a()(),f(35,"br"),o(36,"ion-card")(37,"ion-card-content")(38,"ion-card-header")(39,"ion-card-title"),s(40," Registration "),a(),o(41,"ion-card-subtitle"),s(42,"Use this link on your website to register camps, events and art."),a()(),f(43,"app-url-link",3),o(44,"ion-accordion-group")(45,"ion-accordion",4)(46,"ion-item",5),s(47,"Advanced"),a(),o(48,"div",6)(49,"ion-list",2)(50,"ion-card-header")(51,"ion-card-subtitle"),s(52,"These can be used on your website to register camps, events and art."),a()(),f(53,"app-url-link",7)(54,"app-url-link",8)(55,"app-url-link",9)(56,"app-web-links",10),a()()()()()()),i&2&&(l(7),h("ngModel",e.enabled),l(4),h("ngModel",e.eventRegistration),l(4),h("ngModel",e.eventEditing),l(4),h("ngModel",e.musicRegistration),l(4),h("ngModel",e.artEditing),l(4),h("ngModel",e.requirePin),l(2),I(e.requirePin?29:-1),l(3),h("ngModel",e.directions),l(2),I(e.directions?34:-1),l(9),d("url",e.burnUrl),l(10),d("url",e.url)("enabled",!!e.enabled),l(),d("url",e.eventUrl)("enabled",!!e.eventEditing),l(),d("url",e.artUrl)("enabled",!!e.enabled),l(),d("vanity",e.vanity()))},dependencies:[Ne,Q,K,Oe,U,O,J,z,L,k,F,M,E,R,V,ue,Ue,Re,ge],styles:[".url[_ngcontent-%COMP%]{color:var(--ion-color-dark)}ion-icon[_ngcontent-%COMP%]{cursor:pointer}"]});var he=ie;var ne=class ne{constructor(){this.username=b("");this.server=b("");this.inboxEmail=b("");this.rssFeed=b("");this.primaryColor=b("");this.saved=Y();this.saving=G(!1);this.alert=w(j)}save(){return C(this,null,function*(){if(this.username()==""&&this.server()==""&&this.inboxEmail()==""&&this.rssFeed()==""&&this.primaryColor()==""){this.saved.emit({mastodonHandle:"",inboxEmail:"",rssFeed:"",theme:null});return}if(this.username().length<2&&this.server().length>0){yield S(this.alert,"Your mastodon username must be specified");return}if(this.server().length<2&&this.username().length>0){yield S(this.alert,"The mastodon server must be specified");return}if(!this.server().includes(".")&&this.username().length>0){yield S(this.alert,"The mastodon server is not valid");return}if(!this.validUsername(this.username())&&this.server().length>0){yield S(this.alert,"The mastodon username is not valid");return}if(!this.validServername(this.server())&&this.username().length>0){yield S(this.alert,"The mastodon server is not valid");return}let t=this.username()==""?"":`@${this.username()}@${this.server()}`,i=this.primaryColor()?{primaryColor:this.primaryColor()}:null;this.saved.emit({mastodonHandle:t,inboxEmail:this.inboxEmail(),rssFeed:this.rssFeed(),theme:i}),this.saving.set(!0)})}validUsername(t){return/^[a-zA-Z0-9_]+$/.test(t)}validServername(t){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?)*$/.test(t)}reset(){this.username.set(""),this.server.set(""),this.inboxEmail.set(""),this.rssFeed.set(""),this.primaryColor.set("")}};ne.\u0275fac=function(i){return new(i||ne)},ne.\u0275cmp=y({type:ne,selectors:[["app-message-settings"]],inputs:{username:[1,"username"],server:[1,"server"],inboxEmail:[1,"inboxEmail"],rssFeed:[1,"rssFeed"],primaryColor:[1,"primaryColor"]},outputs:{username:"usernameChange",server:"serverChange",inboxEmail:"inboxEmailChange",rssFeed:"rssFeedChange",primaryColor:"primaryColorChange",saved:"saved"},decls:45,vars:6,consts:[[2,"width","100%"],["lines","none"],["label","Mastodon Username","labelPlacement","stacked","placeholder","Username","helperText","","maxlength","256",3,"ngModelChange","ngModel"],["label","Mastodon Server","labelPlacement","stacked","placeholder","E.g. mastondon.social","helperText","",3,"ngModelChange","ngModel"],["label","Email Address","labelPlacement","stacked","placeholder","","helperText","","maxlength","256",3,"ngModelChange","ngModel"],["label","RSS Feed","labelPlacement","stacked","placeholder","","helperText","","maxlength","512",3,"ngModelChange","ngModel"],["label","Color","labelPlacement","stacked","placeholder","","helperText","","maxlength","256",3,"ngModelChange","ngModel"],[1,"row-center","ion-padding"],["size","small",3,"click","disabled"],["size","small",3,"click"]],template:function(i,e){i&1&&(o(0,"ion-card")(1,"ion-card-content")(2,"ion-card-header")(3,"ion-card-title",0),s(4," Mastodon "),a(),o(5,"ion-card-subtitle"),s(6," Posts to this mastodon account will be sent as notifications to all users in dust who have visited your regional. The top 20 posts of this account are shown in dust in the messages section. "),a()(),o(7,"ion-list")(8,"ion-item",1)(9,"ion-input",2),v("ngModelChange",function(n){return _(e.username,n)||(e.username=n),n}),a(),o(10,"p"),s(11,"@"),a(),o(12,"ion-input",3),v("ngModelChange",function(n){return _(e.server,n)||(e.server=n),n}),a()()()(),o(13,"ion-card-content")(14,"ion-card-header")(15,"ion-card-title"),s(16," Email "),a(),o(17,"ion-card-subtitle"),s(18,"Emails sent to inbox@dust.events from this email address will be sent as notifications to all users in dust who have visited your regional. The email will also show dust in the messages section."),a()(),o(19,"ion-list")(20,"ion-item",1)(21,"ion-input",4),v("ngModelChange",function(n){return _(e.inboxEmail,n)||(e.inboxEmail=n),n}),a()()()(),o(22,"ion-card-content")(23,"ion-card-header")(24,"ion-card-title"),s(25," RSS "),a(),o(26,"ion-card-subtitle"),s(27,"New articles in this RSS Feed will be sent as notifications to all users in dust who have visited your event. The article will also show dust in the messages section."),a()(),o(28,"ion-list")(29,"ion-item",1)(30,"ion-input",5),v("ngModelChange",function(n){return _(e.rssFeed,n)||(e.rssFeed=n),n}),a()()()(),o(31,"ion-card-content")(32,"ion-card-header")(33,"ion-card-title"),s(34," Theme "),a(),o(35,"ion-card-subtitle"),s(36,"Customize the theme for your event."),a()(),o(37,"ion-list")(38,"ion-item",1)(39,"ion-input",6),v("ngModelChange",function(n){return _(e.primaryColor,n)||(e.primaryColor=n),n}),a()()(),o(40,"div",7)(41,"ion-button",8),m("click",function(){return e.save()}),s(42,"Apply"),a(),o(43,"ion-button",9),m("click",function(){return e.reset()}),s(44,"Reset"),a()()()()),i&2&&(l(9),h("ngModel",e.username),l(3),h("ngModel",e.server),l(9),h("ngModel",e.inboxEmail),l(9),h("ngModel",e.rssFeed),l(9),h("ngModel",e.primaryColor),l(2),d("disabled",e.saving()))},dependencies:[T,k,Q,L,F,M,E,R,U,O,J,z,V],styles:["ion-card-subtitle[_ngcontent-%COMP%]{text-wrap:wrap;width:100%}p[_ngcontent-%COMP%]{font-size:var(--fr3);padding-top:.75rem}"]});var _e=ne;var oe=class oe{constructor(){this.identifier=b("");this.domain=b("");this.uniqueId=b("");this.saving=G(!1);this.saved=Y();this.alert=w(j)}save(){return C(this,null,function*(){if(Z(this.identifier())&&Z(this.domain())){this.saved.emit({identifier:"",domain:""});return}if(this.domain().length<2){yield S(this.alert,"The domain must be specified");return}let t=this.domain().replace(".volunteeripate.com","").replace("http://","").replace("https://","");if(t.includes(".")){yield S(this.alert,"The domain should not contain a period");return}this.saved.emit({identifier:this.identifier(),domain:t}),this.saving.set(!0)})}reset(){this.identifier.set(""),this.domain.set("")}};oe.\u0275fac=function(i){return new(i||oe)},oe.\u0275cmp=y({type:oe,selectors:[["app-volunteeripate-settings"]],inputs:{identifier:[1,"identifier"],domain:[1,"domain"],uniqueId:[1,"uniqueId"]},outputs:{identifier:"identifierChange",domain:"domainChange",uniqueId:"uniqueIdChange",saved:"saved"},decls:19,vars:3,consts:[["href","https://volunteeripate.com"],["lines","none"],["label","Subdomain","labelPlacement","stacked",3,"ngModelChange","placeholder","helperText","ngModel"],[1,"row-center","ion-padding"],["size","small",3,"click","disabled"],["size","small",3,"click"]],template:function(i,e){i&1&&(o(0,"ion-card")(1,"ion-card-content")(2,"ion-card-header")(3,"ion-card-title"),s(4," Volunteeripate "),a(),o(5,"ion-card-subtitle"),s(6,"Dust can show a volunteers shifts and remind them before the shift begins."),f(7,"br"),o(8,"a",0),s(9,"Volunteeripate"),a(),s(10," is a platform for volunteering and tickets. "),a()(),o(11,"ion-list")(12,"ion-item",1)(13,"ion-input",2),v("ngModelChange",function(n){return _(e.domain,n)||(e.domain=n),n}),a()()(),o(14,"div",3)(15,"ion-button",4),m("click",function(){return e.save()}),s(16,"Apply"),a(),o(17,"ion-button",5),m("click",function(){return e.reset()}),s(18,"Reset"),a()()()()),i&2&&(l(13),d("helperText","E.g. "+e.uniqueId()+".volunteeripate.com"),h("ngModel",e.domain),l(2),d("disabled",e.saving()))},dependencies:[T,k,Q,L,F,M,E,R,U,O,z,V],styles:["p[_ngcontent-%COMP%]{font-size:var(--fr3);padding-top:.75rem}"]});var ve=oe;var ae=class ae{constructor(){this.campFormUrl=b("");this.artFormUrl=b("");this.mutantVehicleFormUrl=b("");this.saving=G(!1);this.saved=Y();this.alert=w(j)}save(){return C(this,null,function*(){if(Z(this.campFormUrl())&&Z(this.artFormUrl())&&Z(this.mutantVehicleFormUrl())){this.saved.emit({campsFormUrl:"",artFormUrl:"",mutantVehicleUrl:""});return}if(!de(this.campFormUrl(),!0)){yield S(this.alert,"The theme camp form URL is not valid");return}if(!de(this.artFormUrl(),!0)){yield S(this.alert,"The art form URL is not valid");return}if(!de(this.mutantVehicleFormUrl(),!0)){yield S(this.alert,"The mutant vehicle form URL is not valid");return}this.saved.emit({campsFormUrl:this.campFormUrl(),artFormUrl:this.artFormUrl(),mutantVehicleUrl:this.mutantVehicleFormUrl()}),this.saving.set(!0)})}reset(){this.campFormUrl.set(""),this.artFormUrl.set(""),this.mutantVehicleFormUrl.set("")}};ae.\u0275fac=function(i){return new(i||ae)},ae.\u0275cmp=y({type:ae,selectors:[["app-placement-settings"]],inputs:{campFormUrl:[1,"campFormUrl"],artFormUrl:[1,"artFormUrl"],mutantVehicleFormUrl:[1,"mutantVehicleFormUrl"]},outputs:{campFormUrl:"campFormUrlChange",artFormUrl:"artFormUrlChange",mutantVehicleFormUrl:"mutantVehicleFormUrlChange",saved:"saved"},decls:19,vars:4,consts:[["lines","none"],["label","Theme Camp Placement Form URL","labelPlacement","stacked","placeholder","","maxlength","2048",3,"ngModelChange","ngModel"],["label","Art Placement Form URL","labelPlacement","stacked","placeholder","","maxlength","2048",3,"ngModelChange","ngModel"],["label","Mutant Vehicle Placement Form URL","labelPlacement","stacked","placeholder","","maxlength","2048",3,"ngModelChange","ngModel"],[1,"row-center","ion-padding"],["size","small",3,"click","disabled"],["size","small",3,"click"]],template:function(i,e){i&1&&(o(0,"ion-card")(1,"ion-card-content")(2,"ion-card-header")(3,"ion-card-title"),s(4," Placement "),a(),o(5,"ion-card-subtitle"),s(6,"Dust will send an email after a camp, artist or mutant vehicle has registered. By specifying a link to a placement form they will also be encouraged to complete the form. "),a()(),o(7,"ion-list")(8,"ion-item",0)(9,"ion-input",1),v("ngModelChange",function(n){return _(e.campFormUrl,n)||(e.campFormUrl=n),n}),a()(),o(10,"ion-item",0)(11,"ion-input",2),v("ngModelChange",function(n){return _(e.artFormUrl,n)||(e.artFormUrl=n),n}),a()(),o(12,"ion-item",0)(13,"ion-input",3),v("ngModelChange",function(n){return _(e.mutantVehicleFormUrl,n)||(e.mutantVehicleFormUrl=n),n}),a()()(),o(14,"div",4)(15,"ion-button",5),m("click",function(){return e.save()}),s(16,"Apply"),a(),o(17,"ion-button",6),m("click",function(){return e.reset()}),s(18,"Reset"),a()()()()),i&2&&(l(9),h("ngModel",e.campFormUrl),l(2),h("ngModel",e.artFormUrl),l(2),h("ngModel",e.mutantVehicleFormUrl),l(2),d("disabled",e.saving()))},dependencies:[T,k,Q,L,F,M,E,R,U,O,J,z,V],styles:["p[_ngcontent-%COMP%]{font-size:var(--fr3);padding-top:.75rem}ion-card-subtitle[_ngcontent-%COMP%]{text-wrap:wrap;width:100%}"]});var fe=ae;var at=()=>["Live Music","Bipoc","Wheelchair Accessible"];function rt(c,t){if(c&1&&s(0),c&2){let i=p(2);A(" Delete ",i.festival.name," ")}}function st(c,t){c&1&&s(0," Delete ")}function lt(c,t){if(c&1){let i=P();o(0,"ion-row",12)(1,"ion-col")(2,"ion-text"),s(3),a()(),o(4,"ion-col",13)(5,"ion-button",14),m("click",function(){u(i);let r=p(2);return g(r.clearEvents())}),s(6,"Delete Events"),a()()()}if(c&2){let i=p(2);l(3),A("Delete all events at ",i.festival.name,"? This cannot be undone.")}}function mt(c,t){if(c&1&&s(0),c&2){let i=p(2);A(" Delete ",i.festival.name,"? This cannot be undone. ")}}function dt(c,t){if(c&1&&s(0),c&2){let i=p(2);A(" Delete all camps, events and art at ",i.festival.name,"? This cannot be undone. ")}}function ct(c,t){var i;if(c&1){let e=P();o(0,"div",5),f(1,"app-camp-registration",6)(2,"br"),o(3,"app-message-settings",7),m("saved",function(n){u(e);let W=p();return g(W.saveMessageSettings(n))}),a(),f(4,"br"),o(5,"app-placement-settings",8),m("saved",function(n){u(e);let W=p();return g(W.savePlacementSettings(n))}),a(),f(6,"br"),o(7,"app-volunteeripate-settings",9),m("saved",function(n){u(e);let W=p();return g(W.saveVoluneeripateSettings(n))}),a(),f(8,"br"),o(9,"app-event-types",10),m("eventTypesChange",function(n){u(e);let W=p();return g(W.saveEventTypes(n))}),a(),f(10,"br"),o(11,"app-event-types",11),m("eventTypesChange",function(n){u(e);let W=p();return g(W.saveMusicTypes(n))}),a(),f(12,"br"),o(13,"ion-card",0)(14,"ion-card-content")(15,"ion-card-header")(16,"ion-card-title"),x(17,rt,1,1)(18,st,1,0),a()(),o(19,"ion-grid"),x(20,lt,7,1,"ion-row",12),o(21,"ion-row",12)(22,"ion-col")(23,"ion-text"),x(24,mt,1,1)(25,dt,1,1),a()(),o(26,"ion-col",13)(27,"ion-button",14),m("click",function(){u(e);let n=p();return g(n.deleteBurn())}),s(28,"Delete All"),a()()()()()()()}if(c&2){let e=p();l(),d("enabled",e.festival.camp_registration)("eventRegistration",e.festival.event_registration)("musicRegistration",e.festival.music_registration)("eventEditing",e.festival.event_editing)("campEditing",e.festival.camp_editing)("artEditing",e.festival.art_editing)("mapDirection",e.festival.map_direction)("pin",e.festival.pin)("directionsText",e.festival.directions)("directions",e.festival.directions!==null)("requirePin",e.festival.pin!==null)("vanity",e.festival.vanity),l(2),d("server",e.mastodonServer(e.festival.mastodon_handle))("username",e.mastodonUsername(e.festival.mastodon_handle))("inboxEmail",e.festival.inbox_email)("rssFeed",e.festival.rss_feed)("primaryColor",(i=e.festival.theme==null?null:e.festival.theme.primaryColor)!=null?i:""),l(2),d("campFormUrl",e.festival.placement_form_camps)("artFormUrl",e.festival.placement_form_art)("mutantVehicleFormUrl",e.festival.placement_form_cars),l(2),d("identifier",e.festival.volunteeripate_identifier)("domain",e.festival.volunteeripate_domain)("uniqueId",e.festival.vanity),l(2),d("maxTypes",e.festival.max_event_types)("eventTypes",e.festival.event_types),l(2),d("defaultTypes",Te(31,at))("maxTypes",e.festival.max_music_types)("eventTypes",e.festival.music_types),l(6),I(e.canDeleteBurn?17:18),l(3),I(e.canDeleteBurn?-1:20),l(4),I(e.canDeleteBurn?24:25)}}var re=class re{constructor(){this.api=w(H);this.location=w(Me);this.alert=w(j);this.canDeleteBurn=!1;this.router=w(xe)}ngOnInit(){return C(this,null,function*(){var t,i;this.vanity&&(this.festival=yield this.api.getFestivalByVanity(this.vanity,!0,!1),this.festival&&!((t=this.festival)!=null&&t.max_event_types)&&(this.festival.max_event_types=2),this.festival&&!((i=this.festival)!=null&&i.max_music_types)&&(this.festival.max_music_types=2))})}saveEventTypes(t){return C(this,null,function*(){this.festival&&(this.festival.event_types=t.eventTypes,this.festival.max_event_types=t.maxTypes,yield this.api.setEventTypes(this.festival),this.location.back())})}saveMusicTypes(t){return C(this,null,function*(){this.festival&&(this.festival.music_types=t.eventTypes,this.festival.max_music_types=t.maxTypes,yield this.api.setMusicTypes(this.festival),this.location.back())})}saveVoluneeripateSettings(t){return C(this,null,function*(){this.festival&&(yield this.api.setVolunteeripateSettings(this.festival.vanity,t),this.location.back())})}savePlacementSettings(t){return C(this,null,function*(){this.festival&&(yield this.api.setPlacementSettings(this.festival.vanity,t),this.location.back())})}saveMessageSettings(t){return C(this,null,function*(){this.festival&&(yield this.api.setMessageSettings({mastodon_handle:t.mastodonHandle,inbox_email:t.inboxEmail,festival_vanity:this.festival.vanity,rss_feed:t.rssFeed,theme:t.theme}),this.location.back())})}deleteBurn(){return C(this,null,function*(){(yield this.clearData(this.canDeleteBurn))&&(this.canDeleteBurn=!0)})}clearData(t){return C(this,null,function*(){var i,e;return this.api.isAdmin(this.api.festivalId)?!(yield se(this.alert,t?`Are you sure you want to delete ${(i=this.festival)==null?void 0:i.name}?`:"Are you sure you want to delete all camps, art and events?","Delete"))||!(yield se(this.alert,t?`Are you super sure you want to DELETE ${(e=this.festival)==null?void 0:e.name.toUpperCase()}?`:"Are you super sure you want to DELETE ALL CAMPS, ARTS & EVENTS?","Yes"))?!1:(yield this.api.clearData(t),t||this.api.sendMessage('All camps, art and events have been deleted. Be sure to click "Publish" to apply the changes to the app.'),this.api.clearCache(),t&&(this.api.signOut(),this.router.navigateByUrl("/auth")),!0):(this.api.sendMessage("This feature is not available to you."),!1)})}mastodonUsername(t){return ze(t)}mastodonServer(t){return Qe(t)}clearEvents(){return C(this,null,function*(){if(!this.api.isAdmin(this.api.festivalId))this.api.sendMessage("This feature is not available to you.");else{if(!(yield se(this.alert,"Are you sure you want to delete all events?","Delete"))||!(yield se(this.alert,"Are you super sure you want DELETE events?","Yes")))return;yield this.api.clearEvents(),this.api.sendMessage('All events have been deleted. Be sure to click "Publish" to apply the changes to the app.'),this.api.clearCache()}})}};re.\u0275fac=function(i){return new(i||re)},re.\u0275cmp=y({type:re,selectors:[["app-settings"]],inputs:{vanity:"vanity"},decls:9,vars:2,consts:[["color","primary"],["slot","start"],["routerLink","../"],[3,"fullscreen"],[1,"border"],[1,"pad-below","ion-padding-top"],[3,"enabled","eventRegistration","musicRegistration","eventEditing","campEditing","artEditing","mapDirection","pin","directionsText","directions","requirePin","vanity"],[3,"saved","server","username","inboxEmail","rssFeed","primaryColor"],[3,"saved","campFormUrl","artFormUrl","mutantVehicleFormUrl"],[3,"saved","identifier","domain","uniqueId"],[3,"eventTypesChange","maxTypes","eventTypes"],["typeTitle","Music Types",3,"eventTypesChange","defaultTypes","maxTypes","eventTypes"],[1,"ion-align-items-center"],["size","auto",1,"ion-justify-content-end"],["color","dark",3,"click"]],template:function(i,e){i&1&&(o(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),f(3,"ion-back-button"),a(),o(4,"ion-title",2),s(5,"Settings"),a()()(),o(6,"ion-content",3)(7,"div",4),x(8,ct,29,32,"div",5),a()()),i&2&&(l(6),d("fullscreen",!0),l(2),I(e.festival?8:-1))},dependencies:[Ae,Fe,Le,E,R,T,M,F,Pe,me,Ve,We,Be,qe,ke,U,De,he,He,_e,fe,ve],encapsulation:2});var Ze=re;export{Ze as SettingsPage};
