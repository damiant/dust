import{A as i,B as o,Cc as G,F as p,Ha as c,Ia as _,Ja as h,S as u,Y as C,la as g,ma as m,nb as M,pa as f,qa as d,qb as V,wa as w,xa as y,xb as b,ya as v}from"./chunk-PHUHKYQ4.js";var T=["container"],a=class a{constructor(){this.gpsChange=new p;this.latChange=new p;this.lngChange=new p}init(){addEventListener("paste",this.listener.bind(this))}listener(l){console.log("listen for paste");let t=l.clipboardData;this.container.nativeElement.focus();let e=t==null?void 0:t.getData("Text");!e||!e.includes(",")||(document.activeElement.blur(),console.log("blur called"),setTimeout(()=>{let n=e.split(",");this.lat=this.round(n[0]),this.lng=this.round(n[1]),console.log(`Pasted GPS: ${this.lat}, ${this.lng}`),this.gpsChange.emit({lat:this.lat,lng:this.lng})},200))}dest(){this.cleanup()}ngOnDestroy(){this.cleanup()}applyGPS(){setTimeout(()=>{this.gpsChange.emit({lat:this.lat,lng:this.lng})},1)}cleanup(){removeEventListener("paste",this.listener)}round(l){let t=Number(l.trim());return Number(t.toFixed(7))}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=C({type:a,selectors:[["app-gps"]],viewQuery:function(t,e){if(t&1&&w(T,5),t&2){let n;y(n=v())&&(e.container=n.first)}},inputs:{lat:"lat",lng:"lng"},outputs:{gpsChange:"gpsChange",latChange:"latChange",lngChange:"lngChange"},decls:4,vars:2,consts:[["container",""],[2,"display","flex"],["label","latitude","labelPlacement","stacked",3,"ionFocus","ionBlur","ngModelChange","ngModel"],["label","longitude","labelPlacement","stacked",3,"ionFocus","ionBlur","ngModelChange","ngModel"]],template:function(t,e){if(t&1){let n=f();g(0,"div",1,0)(2,"ion-input",2),d("ionFocus",function(){return i(n),o(e.init())})("ionBlur",function(){return i(n),o(e.dest())})("ngModelChange",function(){return i(n),o(e.applyGPS())}),h("ngModelChange",function(r){return i(n),_(e.lat,r)||(e.lat=r),o(r)}),m(),g(3,"ion-input",3),d("ionFocus",function(){return i(n),o(e.init())})("ionBlur",function(){return i(n),o(e.dest())})("ngModelChange",function(){return i(n),o(e.applyGPS())}),h("ngModelChange",function(r){return i(n),_(e.lng,r)||(e.lng=r),o(r)}),m()()}t&2&&(u(2),c("ngModel",e.lat),u(),c("ngModel",e.lng))},dependencies:[G,b,M,V],encapsulation:2});var P=a;export{P as a};
